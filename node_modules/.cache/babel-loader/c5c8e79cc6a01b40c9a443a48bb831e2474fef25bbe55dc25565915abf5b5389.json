{"ast":null,"code":"/*! Buttons for DataTables 2.3.4\n * Â©2016-2023 SpryMedia Ltd - datatables.net/license\n */\n\n(function (factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['jquery', 'datatables.net'], function ($) {\n      return factory($, window, document);\n    });\n  } else if (typeof exports === 'object') {\n    // CommonJS\n    module.exports = function (root, $) {\n      if (!root) {\n        // CommonJS environments without a window global must pass a\n        // root. This will give an error otherwise\n        root = window;\n      }\n      if (!$) {\n        $ = typeof window !== 'undefined' ?\n        // jQuery's factory checks for a global window\n        require('jquery') : require('jquery')(root);\n      }\n      if (!$.fn.dataTable) {\n        require('datatables.net')(root, $);\n      }\n      return factory($, root, root.document);\n    };\n  } else {\n    // Browser\n    factory(jQuery, window, document);\n  }\n})(function ($, window, document, undefined) {\n  'use strict';\n\n  var DataTable = $.fn.dataTable;\n\n  // Used for namespacing events added to the document by each instance, so they\n  // can be removed on destroy\n  var _instCounter = 0;\n\n  // Button namespacing counter for namespacing events on individual buttons\n  var _buttonCounter = 0;\n  var _dtButtons = DataTable.ext.buttons;\n\n  // Allow for jQuery slim\n  function _fadeIn(el, duration, fn) {\n    if ($.fn.animate) {\n      el.stop().fadeIn(duration, fn);\n    } else {\n      el.css('display', 'block');\n      if (fn) {\n        fn.call(el);\n      }\n    }\n  }\n  function _fadeOut(el, duration, fn) {\n    if ($.fn.animate) {\n      el.stop().fadeOut(duration, fn);\n    } else {\n      el.css('display', 'none');\n      if (fn) {\n        fn.call(el);\n      }\n    }\n  }\n\n  /**\n   * [Buttons description]\n   * @param {[type]}\n   * @param {[type]}\n   */\n  var Buttons = function (dt, config) {\n    // If not created with a `new` keyword then we return a wrapper function that\n    // will take the settings object for a DT. This allows easy use of new instances\n    // with the `layout` option - e.g. `topLeft: $.fn.dataTable.Buttons( ... )`.\n    if (!(this instanceof Buttons)) {\n      return function (settings) {\n        return new Buttons(settings, dt).container();\n      };\n    }\n\n    // If there is no config set it to an empty object\n    if (typeof config === 'undefined') {\n      config = {};\n    }\n\n    // Allow a boolean true for defaults\n    if (config === true) {\n      config = {};\n    }\n\n    // For easy configuration of buttons an array can be given\n    if (Array.isArray(config)) {\n      config = {\n        buttons: config\n      };\n    }\n    this.c = $.extend(true, {}, Buttons.defaults, config);\n\n    // Don't want a deep copy for the buttons\n    if (config.buttons) {\n      this.c.buttons = config.buttons;\n    }\n    this.s = {\n      dt: new DataTable.Api(dt),\n      buttons: [],\n      listenKeys: '',\n      namespace: 'dtb' + _instCounter++\n    };\n    this.dom = {\n      container: $('<' + this.c.dom.container.tag + '/>').addClass(this.c.dom.container.className)\n    };\n    this._constructor();\n  };\n  $.extend(Buttons.prototype, {\n    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n     * Public methods\n     */\n\n    /**\n     * Get the action of a button\n     * @param  {int|string} Button index\n     * @return {function}\n     */ /**\n        * Set the action of a button\n        * @param  {node} node Button element\n        * @param  {function} action Function to set\n        * @return {Buttons} Self for chaining\n        */\n    action: function (node, action) {\n      var button = this._nodeToButton(node);\n      if (action === undefined) {\n        return button.conf.action;\n      }\n      button.conf.action = action;\n      return this;\n    },\n    /**\n     * Add an active class to the button to make to look active or get current\n     * active state.\n     * @param  {node} node Button element\n     * @param  {boolean} [flag] Enable / disable flag\n     * @return {Buttons} Self for chaining or boolean for getter\n     */\n    active: function (node, flag) {\n      var button = this._nodeToButton(node);\n      var klass = this.c.dom.button.active;\n      var jqNode = $(button.node);\n      if (flag === undefined) {\n        return jqNode.hasClass(klass);\n      }\n      jqNode.toggleClass(klass, flag === undefined ? true : flag);\n      return this;\n    },\n    /**\n     * Add a new button\n     * @param {object} config Button configuration object, base string name or function\n     * @param {int|string} [idx] Button index for where to insert the button\n     * @param {boolean} [draw=true] Trigger a draw. Set a false when adding\n     *   lots of buttons, until the last button.\n     * @return {Buttons} Self for chaining\n     */\n    add: function (config, idx, draw) {\n      var buttons = this.s.buttons;\n      if (typeof idx === 'string') {\n        var split = idx.split('-');\n        var base = this.s;\n        for (var i = 0, ien = split.length - 1; i < ien; i++) {\n          base = base.buttons[split[i] * 1];\n        }\n        buttons = base.buttons;\n        idx = split[split.length - 1] * 1;\n      }\n      this._expandButton(buttons, config, config !== undefined ? config.split : undefined, (config === undefined || config.split === undefined || config.split.length === 0) && base !== undefined, false, idx);\n      if (draw === undefined || draw === true) {\n        this._draw();\n      }\n      return this;\n    },\n    /**\n     * Clear buttons from a collection and then insert new buttons\n     */\n    collectionRebuild: function (node, newButtons) {\n      var button = this._nodeToButton(node);\n      if (newButtons !== undefined) {\n        var i;\n        // Need to reverse the array\n        for (i = button.buttons.length - 1; i >= 0; i--) {\n          this.remove(button.buttons[i].node);\n        }\n\n        // If the collection has prefix and / or postfix buttons we need to add them in\n        if (button.conf.prefixButtons) {\n          newButtons.unshift.apply(newButtons, button.conf.prefixButtons);\n        }\n        if (button.conf.postfixButtons) {\n          newButtons.push.apply(newButtons, button.conf.postfixButtons);\n        }\n        for (i = 0; i < newButtons.length; i++) {\n          var newBtn = newButtons[i];\n          this._expandButton(button.buttons, newBtn, newBtn !== undefined && newBtn.config !== undefined && newBtn.config.split !== undefined, true, newBtn.parentConf !== undefined && newBtn.parentConf.split !== undefined, null, newBtn.parentConf);\n        }\n      }\n      this._draw(button.collection, button.buttons);\n    },\n    /**\n     * Get the container node for the buttons\n     * @return {jQuery} Buttons node\n     */\n    container: function () {\n      return this.dom.container;\n    },\n    /**\n     * Disable a button\n     * @param  {node} node Button node\n     * @return {Buttons} Self for chaining\n     */\n    disable: function (node) {\n      var button = this._nodeToButton(node);\n      $(button.node).addClass(this.c.dom.button.disabled).prop('disabled', true);\n      return this;\n    },\n    /**\n     * Destroy the instance, cleaning up event handlers and removing DOM\n     * elements\n     * @return {Buttons} Self for chaining\n     */\n    destroy: function () {\n      // Key event listener\n      $('body').off('keyup.' + this.s.namespace);\n\n      // Individual button destroy (so they can remove their own events if\n      // needed). Take a copy as the array is modified by `remove`\n      var buttons = this.s.buttons.slice();\n      var i, ien;\n      for (i = 0, ien = buttons.length; i < ien; i++) {\n        this.remove(buttons[i].node);\n      }\n\n      // Container\n      this.dom.container.remove();\n\n      // Remove from the settings object collection\n      var buttonInsts = this.s.dt.settings()[0];\n      for (i = 0, ien = buttonInsts.length; i < ien; i++) {\n        if (buttonInsts.inst === this) {\n          buttonInsts.splice(i, 1);\n          break;\n        }\n      }\n      return this;\n    },\n    /**\n     * Enable / disable a button\n     * @param  {node} node Button node\n     * @param  {boolean} [flag=true] Enable / disable flag\n     * @return {Buttons} Self for chaining\n     */\n    enable: function (node, flag) {\n      if (flag === false) {\n        return this.disable(node);\n      }\n      var button = this._nodeToButton(node);\n      $(button.node).removeClass(this.c.dom.button.disabled).prop('disabled', false);\n      return this;\n    },\n    /**\n     * Get a button's index\n     * \n     * This is internally recursive\n     * @param {element} node Button to get the index of\n     * @return {string} Button index\n     */\n    index: function (node, nested, buttons) {\n      if (!nested) {\n        nested = '';\n        buttons = this.s.buttons;\n      }\n      for (var i = 0, ien = buttons.length; i < ien; i++) {\n        var inner = buttons[i].buttons;\n        if (buttons[i].node === node) {\n          return nested + i;\n        }\n        if (inner && inner.length) {\n          var match = this.index(node, i + '-', inner);\n          if (match !== null) {\n            return match;\n          }\n        }\n      }\n      return null;\n    },\n    /**\n     * Get the instance name for the button set selector\n     * @return {string} Instance name\n     */\n    name: function () {\n      return this.c.name;\n    },\n    /**\n     * Get a button's node of the buttons container if no button is given\n     * @param  {node} [node] Button node\n     * @return {jQuery} Button element, or container\n     */\n    node: function (node) {\n      if (!node) {\n        return this.dom.container;\n      }\n      var button = this._nodeToButton(node);\n      return $(button.node);\n    },\n    /**\n     * Set / get a processing class on the selected button\n     * @param {element} node Triggering button node\n     * @param  {boolean} flag true to add, false to remove, undefined to get\n     * @return {boolean|Buttons} Getter value or this if a setter.\n     */\n    processing: function (node, flag) {\n      var dt = this.s.dt;\n      var button = this._nodeToButton(node);\n      if (flag === undefined) {\n        return $(button.node).hasClass('processing');\n      }\n      $(button.node).toggleClass('processing', flag);\n      $(dt.table().node()).triggerHandler('buttons-processing.dt', [flag, dt.button(node), dt, $(node), button.conf]);\n      return this;\n    },\n    /**\n     * Remove a button.\n     * @param  {node} node Button node\n     * @return {Buttons} Self for chaining\n     */\n    remove: function (node) {\n      var button = this._nodeToButton(node);\n      var host = this._nodeToHost(node);\n      var dt = this.s.dt;\n\n      // Remove any child buttons first\n      if (button.buttons.length) {\n        for (var i = button.buttons.length - 1; i >= 0; i--) {\n          this.remove(button.buttons[i].node);\n        }\n      }\n      button.conf.destroying = true;\n\n      // Allow the button to remove event handlers, etc\n      if (button.conf.destroy) {\n        button.conf.destroy.call(dt.button(node), dt, $(node), button.conf);\n      }\n      this._removeKey(button.conf);\n      $(button.node).remove();\n      var idx = $.inArray(button, host);\n      host.splice(idx, 1);\n      return this;\n    },\n    /**\n     * Get the text for a button\n     * @param  {int|string} node Button index\n     * @return {string} Button text\n     */ /**\n        * Set the text for a button\n        * @param  {int|string|function} node Button index\n        * @param  {string} label Text\n        * @return {Buttons} Self for chaining\n        */\n    text: function (node, label) {\n      var button = this._nodeToButton(node);\n      var buttonLiner = this.c.dom.collection.buttonLiner;\n      var linerTag = button.inCollection && buttonLiner && buttonLiner.tag ? buttonLiner.tag : this.c.dom.buttonLiner.tag;\n      var dt = this.s.dt;\n      var jqNode = $(button.node);\n      var text = function (opt) {\n        return typeof opt === 'function' ? opt(dt, jqNode, button.conf) : opt;\n      };\n      if (label === undefined) {\n        return text(button.conf.text);\n      }\n      button.conf.text = label;\n      if (linerTag) {\n        jqNode.children(linerTag).eq(0).filter(':not(.dt-down-arrow)').html(text(label));\n      } else {\n        jqNode.html(text(label));\n      }\n      return this;\n    },\n    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n     * Constructor\n     */\n\n    /**\n     * Buttons constructor\n     * @private\n     */\n    _constructor: function () {\n      var that = this;\n      var dt = this.s.dt;\n      var dtSettings = dt.settings()[0];\n      var buttons = this.c.buttons;\n      if (!dtSettings._buttons) {\n        dtSettings._buttons = [];\n      }\n      dtSettings._buttons.push({\n        inst: this,\n        name: this.c.name\n      });\n      for (var i = 0, ien = buttons.length; i < ien; i++) {\n        this.add(buttons[i]);\n      }\n      dt.on('destroy', function (e, settings) {\n        if (settings === dtSettings) {\n          that.destroy();\n        }\n      });\n\n      // Global key event binding to listen for button keys\n      $('body').on('keyup.' + this.s.namespace, function (e) {\n        if (!document.activeElement || document.activeElement === document.body) {\n          // SUse a string of characters for fast lookup of if we need to\n          // handle this\n          var character = String.fromCharCode(e.keyCode).toLowerCase();\n          if (that.s.listenKeys.toLowerCase().indexOf(character) !== -1) {\n            that._keypress(character, e);\n          }\n        }\n      });\n    },\n    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n     * Private methods\n     */\n\n    /**\n     * Add a new button to the key press listener\n     * @param {object} conf Resolved button configuration object\n     * @private\n     */\n    _addKey: function (conf) {\n      if (conf.key) {\n        this.s.listenKeys += $.isPlainObject(conf.key) ? conf.key.key : conf.key;\n      }\n    },\n    /**\n     * Insert the buttons into the container. Call without parameters!\n     * @param  {node} [container] Recursive only - Insert point\n     * @param  {array} [buttons] Recursive only - Buttons array\n     * @private\n     */\n    _draw: function (container, buttons) {\n      if (!container) {\n        container = this.dom.container;\n        buttons = this.s.buttons;\n      }\n      container.children().detach();\n      for (var i = 0, ien = buttons.length; i < ien; i++) {\n        container.append(buttons[i].inserter);\n        container.append(' ');\n        if (buttons[i].buttons && buttons[i].buttons.length) {\n          this._draw(buttons[i].collection, buttons[i].buttons);\n        }\n      }\n    },\n    /**\n     * Create buttons from an array of buttons\n     * @param  {array} attachTo Buttons array to attach to\n     * @param  {object} button Button definition\n     * @param  {boolean} inCollection true if the button is in a collection\n     * @private\n     */\n    _expandButton: function (attachTo, button, split, inCollection, inSplit, attachPoint, parentConf) {\n      var dt = this.s.dt;\n      var buttonCounter = 0;\n      var isSplit = false;\n      var buttons = !Array.isArray(button) ? [button] : button;\n      if (button === undefined) {\n        buttons = !Array.isArray(split) ? [split] : split;\n      }\n      if (button !== undefined && button.split !== undefined) {\n        isSplit = true;\n      }\n      for (var i = 0, ien = buttons.length; i < ien; i++) {\n        var conf = this._resolveExtends(buttons[i]);\n        if (!conf) {\n          continue;\n        }\n        if (conf.config !== undefined && conf.config.split) {\n          isSplit = true;\n        } else {\n          isSplit = false;\n        }\n\n        // If the configuration is an array, then expand the buttons at this\n        // point\n        if (Array.isArray(conf)) {\n          this._expandButton(attachTo, conf, built !== undefined && built.conf !== undefined ? built.conf.split : undefined, inCollection, parentConf !== undefined && parentConf.split !== undefined, attachPoint, parentConf);\n          continue;\n        }\n        var built = this._buildButton(conf, inCollection, conf.split !== undefined || conf.config !== undefined && conf.config.split !== undefined, inSplit);\n        if (!built) {\n          continue;\n        }\n        if (attachPoint !== undefined && attachPoint !== null) {\n          attachTo.splice(attachPoint, 0, built);\n          attachPoint++;\n        } else {\n          attachTo.push(built);\n        }\n        if (built.conf.buttons || built.conf.split) {\n          built.collection = $('<' + (isSplit ? this.c.dom.splitCollection.tag : this.c.dom.collection.tag) + '/>');\n          built.conf._collection = built.collection;\n          if (built.conf.split) {\n            for (var j = 0; j < built.conf.split.length; j++) {\n              if (typeof built.conf.split[j] === \"object\") {\n                built.conf.split[j].parent = parentConf;\n                if (built.conf.split[j].collectionLayout === undefined) {\n                  built.conf.split[j].collectionLayout = built.conf.collectionLayout;\n                }\n                if (built.conf.split[j].dropup === undefined) {\n                  built.conf.split[j].dropup = built.conf.dropup;\n                }\n                if (built.conf.split[j].fade === undefined) {\n                  built.conf.split[j].fade = built.conf.fade;\n                }\n              }\n            }\n          } else {\n            $(built.node).append($('<span class=\"dt-down-arrow\">' + this.c.dom.splitDropdown.text + '</span>'));\n          }\n          this._expandButton(built.buttons, built.conf.buttons, built.conf.split, !isSplit, isSplit, attachPoint, built.conf);\n        }\n        built.conf.parent = parentConf;\n\n        // init call is made here, rather than buildButton as it needs to\n        // be selectable, and for that it needs to be in the buttons array\n        if (conf.init) {\n          conf.init.call(dt.button(built.node), dt, $(built.node), conf);\n        }\n        buttonCounter++;\n      }\n    },\n    /**\n     * Create an individual button\n     * @param  {object} config            Resolved button configuration\n     * @param  {boolean} inCollection `true` if a collection button\n     * @return {jQuery} Created button node (jQuery)\n     * @private\n     */\n    _buildButton: function (config, inCollection, isSplit, inSplit) {\n      var buttonDom = this.c.dom.button;\n      var linerDom = this.c.dom.buttonLiner;\n      var collectionDom = this.c.dom.collection;\n      var splitDom = this.c.dom.split;\n      var splitCollectionDom = this.c.dom.splitCollection;\n      var splitDropdownButton = this.c.dom.splitDropdownButton;\n      var dt = this.s.dt;\n      var text = function (opt) {\n        return typeof opt === 'function' ? opt(dt, button, config) : opt;\n      };\n\n      // Spacers don't do much other than insert an element into the DOM\n      if (config.spacer) {\n        var spacer = $('<span></span>').addClass('dt-button-spacer ' + config.style + ' ' + buttonDom.spacerClass).html(text(config.text));\n        return {\n          conf: config,\n          node: spacer,\n          inserter: spacer,\n          buttons: [],\n          inCollection: inCollection,\n          isSplit: isSplit,\n          inSplit: inSplit,\n          collection: null\n        };\n      }\n      if (!isSplit && inSplit && splitCollectionDom) {\n        buttonDom = splitDropdownButton;\n      } else if (!isSplit && inCollection && collectionDom.button) {\n        buttonDom = collectionDom.button;\n      }\n      if (!isSplit && inSplit && splitCollectionDom.buttonLiner) {\n        linerDom = splitCollectionDom.buttonLiner;\n      } else if (!isSplit && inCollection && collectionDom.buttonLiner) {\n        linerDom = collectionDom.buttonLiner;\n      }\n\n      // Make sure that the button is available based on whatever requirements\n      // it has. For example, PDF button require pdfmake\n      if (config.available && !config.available(dt, config) && !config.hasOwnProperty('html')) {\n        return false;\n      }\n      var button;\n      if (!config.hasOwnProperty('html')) {\n        var action = function (e, dt, button, config) {\n          config.action.call(dt.button(button), e, dt, button, config);\n          $(dt.table().node()).triggerHandler('buttons-action.dt', [dt.button(button), dt, button, config]);\n        };\n        var tag = config.tag || buttonDom.tag;\n        var clickBlurs = config.clickBlurs === undefined ? true : config.clickBlurs;\n        button = $('<' + tag + '/>').addClass(buttonDom.className).addClass(inSplit ? this.c.dom.splitDropdownButton.className : '').attr('tabindex', this.s.dt.settings()[0].iTabIndex).attr('aria-controls', this.s.dt.table().node().id).on('click.dtb', function (e) {\n          e.preventDefault();\n          if (!button.hasClass(buttonDom.disabled) && config.action) {\n            action(e, dt, button, config);\n          }\n          if (clickBlurs) {\n            button.trigger('blur');\n          }\n        }).on('keypress.dtb', function (e) {\n          if (e.keyCode === 13) {\n            e.preventDefault();\n            if (!button.hasClass(buttonDom.disabled) && config.action) {\n              action(e, dt, button, config);\n            }\n          }\n        });\n\n        // Make `a` tags act like a link\n        if (tag.toLowerCase() === 'a') {\n          button.attr('href', '#');\n        }\n\n        // Button tags should have `type=button` so they don't have any default behaviour\n        if (tag.toLowerCase() === 'button') {\n          button.attr('type', 'button');\n        }\n        if (linerDom.tag) {\n          var liner = $('<' + linerDom.tag + '/>').html(text(config.text)).addClass(linerDom.className);\n          if (linerDom.tag.toLowerCase() === 'a') {\n            liner.attr('href', '#');\n          }\n          button.append(liner);\n        } else {\n          button.html(text(config.text));\n        }\n        if (config.enabled === false) {\n          button.addClass(buttonDom.disabled);\n        }\n        if (config.className) {\n          button.addClass(config.className);\n        }\n        if (config.titleAttr) {\n          button.attr('title', text(config.titleAttr));\n        }\n        if (config.attr) {\n          button.attr(config.attr);\n        }\n        if (!config.namespace) {\n          config.namespace = '.dt-button-' + _buttonCounter++;\n        }\n        if (config.config !== undefined && config.config.split) {\n          config.split = config.config.split;\n        }\n      } else {\n        button = $(config.html);\n      }\n      var buttonContainer = this.c.dom.buttonContainer;\n      var inserter;\n      if (buttonContainer && buttonContainer.tag) {\n        inserter = $('<' + buttonContainer.tag + '/>').addClass(buttonContainer.className).append(button);\n      } else {\n        inserter = button;\n      }\n      this._addKey(config);\n\n      // Style integration callback for DOM manipulation\n      // Note that this is _not_ documented. It is currently\n      // for style integration only\n      if (this.c.buttonCreated) {\n        inserter = this.c.buttonCreated(config, inserter);\n      }\n      var splitDiv;\n      if (isSplit) {\n        splitDiv = $('<div/>').addClass(this.c.dom.splitWrapper.className);\n        splitDiv.append(button);\n        var dropButtonConfig = $.extend(config, {\n          text: this.c.dom.splitDropdown.text,\n          className: this.c.dom.splitDropdown.className,\n          closeButton: false,\n          attr: {\n            'aria-haspopup': 'dialog',\n            'aria-expanded': false\n          },\n          align: this.c.dom.splitDropdown.align,\n          splitAlignClass: this.c.dom.splitDropdown.splitAlignClass\n        });\n        this._addKey(dropButtonConfig);\n        var splitAction = function (e, dt, button, config) {\n          _dtButtons.split.action.call(dt.button(splitDiv), e, dt, button, config);\n          $(dt.table().node()).triggerHandler('buttons-action.dt', [dt.button(button), dt, button, config]);\n          button.attr('aria-expanded', true);\n        };\n        var dropButton = $('<button class=\"' + this.c.dom.splitDropdown.className + ' dt-button\"><span class=\"dt-btn-split-drop-arrow\">' + this.c.dom.splitDropdown.text + '</span></button>').on('click.dtb', function (e) {\n          e.preventDefault();\n          e.stopPropagation();\n          if (!dropButton.hasClass(buttonDom.disabled)) {\n            splitAction(e, dt, dropButton, dropButtonConfig);\n          }\n          if (clickBlurs) {\n            dropButton.trigger('blur');\n          }\n        }).on('keypress.dtb', function (e) {\n          if (e.keyCode === 13) {\n            e.preventDefault();\n            if (!dropButton.hasClass(buttonDom.disabled)) {\n              splitAction(e, dt, dropButton, dropButtonConfig);\n            }\n          }\n        });\n        if (config.split.length === 0) {\n          dropButton.addClass('dtb-hide-drop');\n        }\n        splitDiv.append(dropButton).attr(dropButtonConfig.attr);\n      }\n      return {\n        conf: config,\n        node: isSplit ? splitDiv.get(0) : button.get(0),\n        inserter: isSplit ? splitDiv : inserter,\n        buttons: [],\n        inCollection: inCollection,\n        isSplit: isSplit,\n        inSplit: inSplit,\n        collection: null\n      };\n    },\n    /**\n     * Get the button object from a node (recursive)\n     * @param  {node} node Button node\n     * @param  {array} [buttons] Button array, uses base if not defined\n     * @return {object} Button object\n     * @private\n     */\n    _nodeToButton: function (node, buttons) {\n      if (!buttons) {\n        buttons = this.s.buttons;\n      }\n      for (var i = 0, ien = buttons.length; i < ien; i++) {\n        if (buttons[i].node === node) {\n          return buttons[i];\n        }\n        if (buttons[i].buttons.length) {\n          var ret = this._nodeToButton(node, buttons[i].buttons);\n          if (ret) {\n            return ret;\n          }\n        }\n      }\n    },\n    /**\n     * Get container array for a button from a button node (recursive)\n     * @param  {node} node Button node\n     * @param  {array} [buttons] Button array, uses base if not defined\n     * @return {array} Button's host array\n     * @private\n     */\n    _nodeToHost: function (node, buttons) {\n      if (!buttons) {\n        buttons = this.s.buttons;\n      }\n      for (var i = 0, ien = buttons.length; i < ien; i++) {\n        if (buttons[i].node === node) {\n          return buttons;\n        }\n        if (buttons[i].buttons.length) {\n          var ret = this._nodeToHost(node, buttons[i].buttons);\n          if (ret) {\n            return ret;\n          }\n        }\n      }\n    },\n    /**\n     * Handle a key press - determine if any button's key configured matches\n     * what was typed and trigger the action if so.\n     * @param  {string} character The character pressed\n     * @param  {object} e Key event that triggered this call\n     * @private\n     */\n    _keypress: function (character, e) {\n      // Check if this button press already activated on another instance of Buttons\n      if (e._buttonsHandled) {\n        return;\n      }\n      var run = function (conf, node) {\n        if (!conf.key) {\n          return;\n        }\n        if (conf.key === character) {\n          e._buttonsHandled = true;\n          $(node).click();\n        } else if ($.isPlainObject(conf.key)) {\n          if (conf.key.key !== character) {\n            return;\n          }\n          if (conf.key.shiftKey && !e.shiftKey) {\n            return;\n          }\n          if (conf.key.altKey && !e.altKey) {\n            return;\n          }\n          if (conf.key.ctrlKey && !e.ctrlKey) {\n            return;\n          }\n          if (conf.key.metaKey && !e.metaKey) {\n            return;\n          }\n\n          // Made it this far - it is good\n          e._buttonsHandled = true;\n          $(node).click();\n        }\n      };\n      var recurse = function (a) {\n        for (var i = 0, ien = a.length; i < ien; i++) {\n          run(a[i].conf, a[i].node);\n          if (a[i].buttons.length) {\n            recurse(a[i].buttons);\n          }\n        }\n      };\n      recurse(this.s.buttons);\n    },\n    /**\n     * Remove a key from the key listener for this instance (to be used when a\n     * button is removed)\n     * @param  {object} conf Button configuration\n     * @private\n     */\n    _removeKey: function (conf) {\n      if (conf.key) {\n        var character = $.isPlainObject(conf.key) ? conf.key.key : conf.key;\n\n        // Remove only one character, as multiple buttons could have the\n        // same listening key\n        var a = this.s.listenKeys.split('');\n        var idx = $.inArray(character, a);\n        a.splice(idx, 1);\n        this.s.listenKeys = a.join('');\n      }\n    },\n    /**\n     * Resolve a button configuration\n     * @param  {string|function|object} conf Button config to resolve\n     * @return {object} Button configuration\n     * @private\n     */\n    _resolveExtends: function (conf) {\n      var that = this;\n      var dt = this.s.dt;\n      var i, ien;\n      var toConfObject = function (base) {\n        var loop = 0;\n\n        // Loop until we have resolved to a button configuration, or an\n        // array of button configurations (which will be iterated\n        // separately)\n        while (!$.isPlainObject(base) && !Array.isArray(base)) {\n          if (base === undefined) {\n            return;\n          }\n          if (typeof base === 'function') {\n            base = base.call(that, dt, conf);\n            if (!base) {\n              return false;\n            }\n          } else if (typeof base === 'string') {\n            if (!_dtButtons[base]) {\n              return {\n                html: base\n              };\n            }\n            base = _dtButtons[base];\n          }\n          loop++;\n          if (loop > 30) {\n            // Protect against misconfiguration killing the browser\n            throw 'Buttons: Too many iterations';\n          }\n        }\n        return Array.isArray(base) ? base : $.extend({}, base);\n      };\n      conf = toConfObject(conf);\n      while (conf && conf.extend) {\n        // Use `toConfObject` in case the button definition being extended\n        // is itself a string or a function\n        if (!_dtButtons[conf.extend]) {\n          throw 'Cannot extend unknown button type: ' + conf.extend;\n        }\n        var objArray = toConfObject(_dtButtons[conf.extend]);\n        if (Array.isArray(objArray)) {\n          return objArray;\n        } else if (!objArray) {\n          // This is a little brutal as it might be possible to have a\n          // valid button without the extend, but if there is no extend\n          // then the host button would be acting in an undefined state\n          return false;\n        }\n\n        // Stash the current class name\n        var originalClassName = objArray.className;\n        if (conf.config !== undefined && objArray.config !== undefined) {\n          conf.config = $.extend({}, objArray.config, conf.config);\n        }\n        conf = $.extend({}, objArray, conf);\n\n        // The extend will have overwritten the original class name if the\n        // `conf` object also assigned a class, but we want to concatenate\n        // them so they are list that is combined from all extended buttons\n        if (originalClassName && conf.className !== originalClassName) {\n          conf.className = originalClassName + ' ' + conf.className;\n        }\n\n        // Although we want the `conf` object to overwrite almost all of\n        // the properties of the object being extended, the `extend`\n        // property should come from the object being extended\n        conf.extend = objArray.extend;\n      }\n\n      // Buttons to be added to a collection  -gives the ability to define\n      // if buttons should be added to the start or end of a collection\n      var postfixButtons = conf.postfixButtons;\n      if (postfixButtons) {\n        if (!conf.buttons) {\n          conf.buttons = [];\n        }\n        for (i = 0, ien = postfixButtons.length; i < ien; i++) {\n          conf.buttons.push(postfixButtons[i]);\n        }\n      }\n      var prefixButtons = conf.prefixButtons;\n      if (prefixButtons) {\n        if (!conf.buttons) {\n          conf.buttons = [];\n        }\n        for (i = 0, ien = prefixButtons.length; i < ien; i++) {\n          conf.buttons.splice(i, 0, prefixButtons[i]);\n        }\n      }\n      return conf;\n    },\n    /**\n     * Display (and replace if there is an existing one) a popover attached to a button\n     * @param {string|node} content Content to show\n     * @param {DataTable.Api} hostButton DT API instance of the button\n     * @param {object} inOpts Options (see object below for all options)\n     */\n    _popover: function (content, hostButton, inOpts, e) {\n      var dt = hostButton;\n      var buttonsSettings = this.c;\n      var closed = false;\n      var options = $.extend({\n        align: 'button-left',\n        // button-right, dt-container, split-left, split-right\n        autoClose: false,\n        background: true,\n        backgroundClassName: 'dt-button-background',\n        closeButton: true,\n        contentClassName: buttonsSettings.dom.collection.className,\n        collectionLayout: '',\n        collectionTitle: '',\n        dropup: false,\n        fade: 400,\n        popoverTitle: '',\n        rightAlignClassName: 'dt-button-right',\n        tag: buttonsSettings.dom.collection.tag\n      }, inOpts);\n      var hostNode = hostButton.node();\n      var close = function () {\n        closed = true;\n        _fadeOut($('.dt-button-collection'), options.fade, function () {\n          $(this).detach();\n        });\n        $(dt.buttons('[aria-haspopup=\"dialog\"][aria-expanded=\"true\"]').nodes()).attr('aria-expanded', 'false');\n        $('div.dt-button-background').off('click.dtb-collection');\n        Buttons.background(false, options.backgroundClassName, options.fade, hostNode);\n        $(window).off('resize.resize.dtb-collection');\n        $('body').off('.dtb-collection');\n        dt.off('buttons-action.b-internal');\n        dt.off('destroy');\n      };\n      if (content === false) {\n        close();\n        return;\n      }\n      var existingExpanded = $(dt.buttons('[aria-haspopup=\"dialog\"][aria-expanded=\"true\"]').nodes());\n      if (existingExpanded.length) {\n        // Reuse the current position if the button that was triggered is inside an existing collection\n        if (hostNode.closest('div.dt-button-collection').length) {\n          hostNode = existingExpanded.eq(0);\n        }\n        close();\n      }\n\n      // Try to be smart about the layout\n      var cnt = $('.dt-button', content).length;\n      var mod = '';\n      if (cnt === 3) {\n        mod = 'dtb-b3';\n      } else if (cnt === 2) {\n        mod = 'dtb-b2';\n      } else if (cnt === 1) {\n        mod = 'dtb-b1';\n      }\n      var display = $('<div/>').addClass('dt-button-collection').addClass(options.collectionLayout).addClass(options.splitAlignClass).addClass(mod).css('display', 'none').attr({\n        'aria-modal': true,\n        role: 'dialog'\n      });\n      content = $(content).addClass(options.contentClassName).attr('role', 'menu').appendTo(display);\n      hostNode.attr('aria-expanded', 'true');\n      if (hostNode.parents('body')[0] !== document.body) {\n        hostNode = document.body.lastChild;\n      }\n      if (options.popoverTitle) {\n        display.prepend('<div class=\"dt-button-collection-title\">' + options.popoverTitle + '</div>');\n      } else if (options.collectionTitle) {\n        display.prepend('<div class=\"dt-button-collection-title\">' + options.collectionTitle + '</div>');\n      }\n      if (options.closeButton) {\n        display.prepend('<div class=\"dtb-popover-close\">x</div>').addClass('dtb-collection-closeable');\n      }\n      _fadeIn(display.insertAfter(hostNode), options.fade);\n      var tableContainer = $(hostButton.table().container());\n      var position = display.css('position');\n      if (options.span === 'container' || options.align === 'dt-container') {\n        hostNode = hostNode.parent();\n        display.css('width', tableContainer.width());\n      }\n\n      // Align the popover relative to the DataTables container\n      // Useful for wide popovers such as SearchPanes\n      if (position === 'absolute') {\n        // Align relative to the host button\n        var offsetParent = $(hostNode[0].offsetParent);\n        var buttonPosition = hostNode.position();\n        var buttonOffset = hostNode.offset();\n        var tableSizes = offsetParent.offset();\n        var containerPosition = offsetParent.position();\n        var computed = window.getComputedStyle(offsetParent[0]);\n        tableSizes.height = offsetParent.outerHeight();\n        tableSizes.width = offsetParent.width() + parseFloat(computed.paddingLeft);\n        tableSizes.right = tableSizes.left + tableSizes.width;\n        tableSizes.bottom = tableSizes.top + tableSizes.height;\n\n        // Set the initial position so we can read height / width\n        var top = buttonPosition.top + hostNode.outerHeight();\n        var left = buttonPosition.left;\n        display.css({\n          top: top,\n          left: left\n        });\n\n        // Get the popover position\n        computed = window.getComputedStyle(display[0]);\n        var popoverSizes = display.offset();\n        popoverSizes.height = display.outerHeight();\n        popoverSizes.width = display.outerWidth();\n        popoverSizes.right = popoverSizes.left + popoverSizes.width;\n        popoverSizes.bottom = popoverSizes.top + popoverSizes.height;\n        popoverSizes.marginTop = parseFloat(computed.marginTop);\n        popoverSizes.marginBottom = parseFloat(computed.marginBottom);\n\n        // First position per the class requirements - pop up and right align\n        if (options.dropup) {\n          top = buttonPosition.top - popoverSizes.height - popoverSizes.marginTop - popoverSizes.marginBottom;\n        }\n        if (options.align === 'button-right' || display.hasClass(options.rightAlignClassName)) {\n          left = buttonPosition.left - popoverSizes.width + hostNode.outerWidth();\n        }\n\n        // Container alignment - make sure it doesn't overflow the table container\n        if (options.align === 'dt-container' || options.align === 'container') {\n          if (left < buttonPosition.left) {\n            left = -buttonPosition.left;\n          }\n          if (left + popoverSizes.width > tableSizes.width) {\n            left = tableSizes.width - popoverSizes.width;\n          }\n        }\n\n        // Window adjustment\n        if (containerPosition.left + left + popoverSizes.width > $(window).width()) {\n          // Overflowing the document to the right\n          left = $(window).width() - popoverSizes.width - containerPosition.left;\n        }\n        if (buttonOffset.left + left < 0) {\n          // Off to the left of the document\n          left = -buttonOffset.left;\n        }\n        if (containerPosition.top + top + popoverSizes.height > $(window).height() + $(window).scrollTop()) {\n          // Pop up if otherwise we'd need the user to scroll down\n          top = buttonPosition.top - popoverSizes.height - popoverSizes.marginTop - popoverSizes.marginBottom;\n        }\n        if (containerPosition.top + top < $(window).scrollTop()) {\n          // Correction for when the top is beyond the top of the page\n          top = buttonPosition.top + hostNode.outerHeight();\n        }\n\n        // Calculations all done - now set it\n        display.css({\n          top: top,\n          left: left\n        });\n      } else {\n        // Fix position - centre on screen\n        var position = function () {\n          var half = $(window).height() / 2;\n          var top = display.height() / 2;\n          if (top > half) {\n            top = half;\n          }\n          display.css('marginTop', top * -1);\n        };\n        position();\n        $(window).on('resize.dtb-collection', function () {\n          position();\n        });\n      }\n      if (options.background) {\n        Buttons.background(true, options.backgroundClassName, options.fade, options.backgroundHost || hostNode);\n      }\n\n      // This is bonkers, but if we don't have a click listener on the\n      // background element, iOS Safari will ignore the body click\n      // listener below. An empty function here is all that is\n      // required to make it work...\n      $('div.dt-button-background').on('click.dtb-collection', function () {});\n      if (options.autoClose) {\n        setTimeout(function () {\n          dt.on('buttons-action.b-internal', function (e, btn, dt, node) {\n            if (node[0] === hostNode[0]) {\n              return;\n            }\n            close();\n          });\n        }, 0);\n      }\n      $(display).trigger('buttons-popover.dt');\n      dt.on('destroy', close);\n      setTimeout(function () {\n        closed = false;\n        $('body').on('click.dtb-collection', function (e) {\n          if (closed) {\n            return;\n          }\n\n          // andSelf is deprecated in jQ1.8, but we want 1.7 compat\n          var back = $.fn.addBack ? 'addBack' : 'andSelf';\n          var parent = $(e.target).parent()[0];\n          if (!$(e.target).parents()[back]().filter(content).length && !$(parent).hasClass('dt-buttons') || $(e.target).hasClass('dt-button-background')) {\n            close();\n          }\n        }).on('keyup.dtb-collection', function (e) {\n          if (e.keyCode === 27) {\n            close();\n          }\n        }).on('keydown.dtb-collection', function (e) {\n          // Focus trap for tab key\n          var elements = $('a, button', content);\n          var active = document.activeElement;\n          if (e.keyCode !== 9) {\n            // tab\n            return;\n          }\n          if (elements.index(active) === -1) {\n            // If current focus is not inside the popover\n            elements.first().focus();\n            e.preventDefault();\n          } else if (e.shiftKey) {\n            // Reverse tabbing order when shift key is pressed\n            if (active === elements[0]) {\n              elements.last().focus();\n              e.preventDefault();\n            }\n          } else {\n            if (active === elements.last()[0]) {\n              elements.first().focus();\n              e.preventDefault();\n            }\n          }\n        });\n      }, 0);\n    }\n  });\n\n  /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n   * Statics\n   */\n\n  /**\n   * Show / hide a background layer behind a collection\n   * @param  {boolean} Flag to indicate if the background should be shown or\n   *   hidden \n   * @param  {string} Class to assign to the background\n   * @static\n   */\n  Buttons.background = function (show, className, fade, insertPoint) {\n    if (fade === undefined) {\n      fade = 400;\n    }\n    if (!insertPoint) {\n      insertPoint = document.body;\n    }\n    if (show) {\n      _fadeIn($('<div/>').addClass(className).css('display', 'none').insertAfter(insertPoint), fade);\n    } else {\n      _fadeOut($('div.' + className), fade, function () {\n        $(this).removeClass(className).remove();\n      });\n    }\n  };\n\n  /**\n   * Instance selector - select Buttons instances based on an instance selector\n   * value from the buttons assigned to a DataTable. This is only useful if\n   * multiple instances are attached to a DataTable.\n   * @param  {string|int|array} Instance selector - see `instance-selector`\n   *   documentation on the DataTables site\n   * @param  {array} Button instance array that was attached to the DataTables\n   *   settings object\n   * @return {array} Buttons instances\n   * @static\n   */\n  Buttons.instanceSelector = function (group, buttons) {\n    if (group === undefined || group === null) {\n      return $.map(buttons, function (v) {\n        return v.inst;\n      });\n    }\n    var ret = [];\n    var names = $.map(buttons, function (v) {\n      return v.name;\n    });\n\n    // Flatten the group selector into an array of single options\n    var process = function (input) {\n      if (Array.isArray(input)) {\n        for (var i = 0, ien = input.length; i < ien; i++) {\n          process(input[i]);\n        }\n        return;\n      }\n      if (typeof input === 'string') {\n        if (input.indexOf(',') !== -1) {\n          // String selector, list of names\n          process(input.split(','));\n        } else {\n          // String selector individual name\n          var idx = $.inArray(input.trim(), names);\n          if (idx !== -1) {\n            ret.push(buttons[idx].inst);\n          }\n        }\n      } else if (typeof input === 'number') {\n        // Index selector\n        ret.push(buttons[input].inst);\n      } else if (typeof input === 'object') {\n        // Actual instance selector\n        ret.push(input);\n      }\n    };\n    process(group);\n    return ret;\n  };\n\n  /**\n   * Button selector - select one or more buttons from a selector input so some\n   * operation can be performed on them.\n   * @param  {array} Button instances array that the selector should operate on\n   * @param  {string|int|node|jQuery|array} Button selector - see\n   *   `button-selector` documentation on the DataTables site\n   * @return {array} Array of objects containing `inst` and `idx` properties of\n   *   the selected buttons so you know which instance each button belongs to.\n   * @static\n   */\n  Buttons.buttonSelector = function (insts, selector) {\n    var ret = [];\n    var nodeBuilder = function (a, buttons, baseIdx) {\n      var button;\n      var idx;\n      for (var i = 0, ien = buttons.length; i < ien; i++) {\n        button = buttons[i];\n        if (button) {\n          idx = baseIdx !== undefined ? baseIdx + i : i + '';\n          a.push({\n            node: button.node,\n            name: button.conf.name,\n            idx: idx\n          });\n          if (button.buttons) {\n            nodeBuilder(a, button.buttons, idx + '-');\n          }\n        }\n      }\n    };\n    var run = function (selector, inst) {\n      var i, ien;\n      var buttons = [];\n      nodeBuilder(buttons, inst.s.buttons);\n      var nodes = $.map(buttons, function (v) {\n        return v.node;\n      });\n      if (Array.isArray(selector) || selector instanceof $) {\n        for (i = 0, ien = selector.length; i < ien; i++) {\n          run(selector[i], inst);\n        }\n        return;\n      }\n      if (selector === null || selector === undefined || selector === '*') {\n        // Select all\n        for (i = 0, ien = buttons.length; i < ien; i++) {\n          ret.push({\n            inst: inst,\n            node: buttons[i].node\n          });\n        }\n      } else if (typeof selector === 'number') {\n        // Main button index selector\n        if (inst.s.buttons[selector]) {\n          ret.push({\n            inst: inst,\n            node: inst.s.buttons[selector].node\n          });\n        }\n      } else if (typeof selector === 'string') {\n        if (selector.indexOf(',') !== -1) {\n          // Split\n          var a = selector.split(',');\n          for (i = 0, ien = a.length; i < ien; i++) {\n            run(a[i].trim(), inst);\n          }\n        } else if (selector.match(/^\\d+(\\-\\d+)*$/)) {\n          // Sub-button index selector\n          var indexes = $.map(buttons, function (v) {\n            return v.idx;\n          });\n          ret.push({\n            inst: inst,\n            node: buttons[$.inArray(selector, indexes)].node\n          });\n        } else if (selector.indexOf(':name') !== -1) {\n          // Button name selector\n          var name = selector.replace(':name', '');\n          for (i = 0, ien = buttons.length; i < ien; i++) {\n            if (buttons[i].name === name) {\n              ret.push({\n                inst: inst,\n                node: buttons[i].node\n              });\n            }\n          }\n        } else {\n          // jQuery selector on the nodes\n          $(nodes).filter(selector).each(function () {\n            ret.push({\n              inst: inst,\n              node: this\n            });\n          });\n        }\n      } else if (typeof selector === 'object' && selector.nodeName) {\n        // Node selector\n        var idx = $.inArray(selector, nodes);\n        if (idx !== -1) {\n          ret.push({\n            inst: inst,\n            node: nodes[idx]\n          });\n        }\n      }\n    };\n    for (var i = 0, ien = insts.length; i < ien; i++) {\n      var inst = insts[i];\n      run(selector, inst);\n    }\n    return ret;\n  };\n\n  /**\n   * Default function used for formatting output data.\n   * @param {*} str Data to strip\n   */\n  Buttons.stripData = function (str, config) {\n    if (typeof str !== 'string') {\n      return str;\n    }\n\n    // Always remove script tags\n    str = str.replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, '');\n\n    // Always remove comments\n    str = str.replace(/<!\\-\\-.*?\\-\\->/g, '');\n    if (!config || config.stripHtml) {\n      str = str.replace(/<[^>]*>/g, '');\n    }\n    if (!config || config.trim) {\n      str = str.replace(/^\\s+|\\s+$/g, '');\n    }\n    if (!config || config.stripNewlines) {\n      str = str.replace(/\\n/g, ' ');\n    }\n    if (!config || config.decodeEntities) {\n      _exportTextarea.innerHTML = str;\n      str = _exportTextarea.value;\n    }\n    return str;\n  };\n\n  /**\n   * Buttons defaults. For full documentation, please refer to the docs/option\n   * directory or the DataTables site.\n   * @type {Object}\n   * @static\n   */\n  Buttons.defaults = {\n    buttons: ['copy', 'excel', 'csv', 'pdf', 'print'],\n    name: 'main',\n    tabIndex: 0,\n    dom: {\n      container: {\n        tag: 'div',\n        className: 'dt-buttons'\n      },\n      collection: {\n        tag: 'div',\n        className: ''\n      },\n      button: {\n        tag: 'button',\n        className: 'dt-button',\n        active: 'active',\n        disabled: 'disabled',\n        spacerClass: ''\n      },\n      buttonLiner: {\n        tag: 'span',\n        className: ''\n      },\n      split: {\n        tag: 'div',\n        className: 'dt-button-split'\n      },\n      splitWrapper: {\n        tag: 'div',\n        className: 'dt-btn-split-wrapper'\n      },\n      splitDropdown: {\n        tag: 'button',\n        text: '&#x25BC;',\n        className: 'dt-btn-split-drop',\n        align: 'split-right',\n        splitAlignClass: 'dt-button-split-left'\n      },\n      splitDropdownButton: {\n        tag: 'button',\n        className: 'dt-btn-split-drop-button dt-button'\n      },\n      splitCollection: {\n        tag: 'div',\n        className: 'dt-button-split-collection'\n      }\n    }\n  };\n\n  /**\n   * Version information\n   * @type {string}\n   * @static\n   */\n  Buttons.version = '2.3.4';\n  $.extend(_dtButtons, {\n    collection: {\n      text: function (dt) {\n        return dt.i18n('buttons.collection', 'Collection');\n      },\n      className: 'buttons-collection',\n      closeButton: false,\n      init: function (dt, button, config) {\n        button.attr('aria-expanded', false);\n      },\n      action: function (e, dt, button, config) {\n        if (config._collection.parents('body').length) {\n          this.popover(false, config);\n        } else {\n          this.popover(config._collection, config);\n        }\n\n        // When activated using a key - auto focus on the\n        // first item in the popover\n        if (e.type === 'keypress') {\n          $('a, button', config._collection).eq(0).focus();\n        }\n      },\n      attr: {\n        'aria-haspopup': 'dialog'\n      }\n      // Also the popover options, defined in Buttons.popover\n    },\n\n    split: {\n      text: function (dt) {\n        return dt.i18n('buttons.split', 'Split');\n      },\n      className: 'buttons-split',\n      closeButton: false,\n      init: function (dt, button, config) {\n        return button.attr('aria-expanded', false);\n      },\n      action: function (e, dt, button, config) {\n        this.popover(config._collection, config);\n      },\n      attr: {\n        'aria-haspopup': 'dialog'\n      }\n      // Also the popover options, defined in Buttons.popover\n    },\n\n    copy: function (dt, conf) {\n      if (_dtButtons.copyHtml5) {\n        return 'copyHtml5';\n      }\n    },\n    csv: function (dt, conf) {\n      if (_dtButtons.csvHtml5 && _dtButtons.csvHtml5.available(dt, conf)) {\n        return 'csvHtml5';\n      }\n    },\n    excel: function (dt, conf) {\n      if (_dtButtons.excelHtml5 && _dtButtons.excelHtml5.available(dt, conf)) {\n        return 'excelHtml5';\n      }\n    },\n    pdf: function (dt, conf) {\n      if (_dtButtons.pdfHtml5 && _dtButtons.pdfHtml5.available(dt, conf)) {\n        return 'pdfHtml5';\n      }\n    },\n    pageLength: function (dt) {\n      var lengthMenu = dt.settings()[0].aLengthMenu;\n      var vals = [];\n      var lang = [];\n      var text = function (dt) {\n        return dt.i18n('buttons.pageLength', {\n          \"-1\": 'Show all rows',\n          _: 'Show %d rows'\n        }, dt.page.len());\n      };\n\n      // Support for DataTables 1.x 2D array\n      if (Array.isArray(lengthMenu[0])) {\n        vals = lengthMenu[0];\n        lang = lengthMenu[1];\n      } else {\n        for (var i = 0; i < lengthMenu.length; i++) {\n          var option = lengthMenu[i];\n\n          // Support for DataTables 2 object in the array\n          if ($.isPlainObject(option)) {\n            vals.push(option.value);\n            lang.push(option.label);\n          } else {\n            vals.push(option);\n            lang.push(option);\n          }\n        }\n      }\n      return {\n        extend: 'collection',\n        text: text,\n        className: 'buttons-page-length',\n        autoClose: true,\n        buttons: $.map(vals, function (val, i) {\n          return {\n            text: lang[i],\n            className: 'button-page-length',\n            action: function (e, dt) {\n              dt.page.len(val).draw();\n            },\n            init: function (dt, node, conf) {\n              var that = this;\n              var fn = function () {\n                that.active(dt.page.len() === val);\n              };\n              dt.on('length.dt' + conf.namespace, fn);\n              fn();\n            },\n            destroy: function (dt, node, conf) {\n              dt.off('length.dt' + conf.namespace);\n            }\n          };\n        }),\n        init: function (dt, node, conf) {\n          var that = this;\n          dt.on('length.dt' + conf.namespace, function () {\n            that.text(conf.text);\n          });\n        },\n        destroy: function (dt, node, conf) {\n          dt.off('length.dt' + conf.namespace);\n        }\n      };\n    },\n    spacer: {\n      style: 'empty',\n      spacer: true,\n      text: function (dt) {\n        return dt.i18n('buttons.spacer', '');\n      }\n    }\n  });\n\n  /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n   * DataTables API\n   *\n   * For complete documentation, please refer to the docs/api directory or the\n   * DataTables site\n   */\n\n  // Buttons group and individual button selector\n  DataTable.Api.register('buttons()', function (group, selector) {\n    // Argument shifting\n    if (selector === undefined) {\n      selector = group;\n      group = undefined;\n    }\n    this.selector.buttonGroup = group;\n    var res = this.iterator(true, 'table', function (ctx) {\n      if (ctx._buttons) {\n        return Buttons.buttonSelector(Buttons.instanceSelector(group, ctx._buttons), selector);\n      }\n    }, true);\n    res._groupSelector = group;\n    return res;\n  });\n\n  // Individual button selector\n  DataTable.Api.register('button()', function (group, selector) {\n    // just run buttons() and truncate\n    var buttons = this.buttons(group, selector);\n    if (buttons.length > 1) {\n      buttons.splice(1, buttons.length);\n    }\n    return buttons;\n  });\n\n  // Active buttons\n  DataTable.Api.registerPlural('buttons().active()', 'button().active()', function (flag) {\n    if (flag === undefined) {\n      return this.map(function (set) {\n        return set.inst.active(set.node);\n      });\n    }\n    return this.each(function (set) {\n      set.inst.active(set.node, flag);\n    });\n  });\n\n  // Get / set button action\n  DataTable.Api.registerPlural('buttons().action()', 'button().action()', function (action) {\n    if (action === undefined) {\n      return this.map(function (set) {\n        return set.inst.action(set.node);\n      });\n    }\n    return this.each(function (set) {\n      set.inst.action(set.node, action);\n    });\n  });\n\n  // Collection control\n  DataTable.Api.registerPlural('buttons().collectionRebuild()', 'button().collectionRebuild()', function (buttons) {\n    return this.each(function (set) {\n      for (var i = 0; i < buttons.length; i++) {\n        if (typeof buttons[i] === 'object') {\n          buttons[i].parentConf = set;\n        }\n      }\n      set.inst.collectionRebuild(set.node, buttons);\n    });\n  });\n\n  // Enable / disable buttons\n  DataTable.Api.register(['buttons().enable()', 'button().enable()'], function (flag) {\n    return this.each(function (set) {\n      set.inst.enable(set.node, flag);\n    });\n  });\n\n  // Disable buttons\n  DataTable.Api.register(['buttons().disable()', 'button().disable()'], function () {\n    return this.each(function (set) {\n      set.inst.disable(set.node);\n    });\n  });\n\n  // Button index\n  DataTable.Api.register('button().index()', function () {\n    var idx = null;\n    this.each(function (set) {\n      var res = set.inst.index(set.node);\n      if (res !== null) {\n        idx = res;\n      }\n    });\n    return idx;\n  });\n\n  // Get button nodes\n  DataTable.Api.registerPlural('buttons().nodes()', 'button().node()', function () {\n    var jq = $();\n\n    // jQuery will automatically reduce duplicates to a single entry\n    $(this.each(function (set) {\n      jq = jq.add(set.inst.node(set.node));\n    }));\n    return jq;\n  });\n\n  // Get / set button processing state\n  DataTable.Api.registerPlural('buttons().processing()', 'button().processing()', function (flag) {\n    if (flag === undefined) {\n      return this.map(function (set) {\n        return set.inst.processing(set.node);\n      });\n    }\n    return this.each(function (set) {\n      set.inst.processing(set.node, flag);\n    });\n  });\n\n  // Get / set button text (i.e. the button labels)\n  DataTable.Api.registerPlural('buttons().text()', 'button().text()', function (label) {\n    if (label === undefined) {\n      return this.map(function (set) {\n        return set.inst.text(set.node);\n      });\n    }\n    return this.each(function (set) {\n      set.inst.text(set.node, label);\n    });\n  });\n\n  // Trigger a button's action\n  DataTable.Api.registerPlural('buttons().trigger()', 'button().trigger()', function () {\n    return this.each(function (set) {\n      set.inst.node(set.node).trigger('click');\n    });\n  });\n\n  // Button resolver to the popover\n  DataTable.Api.register('button().popover()', function (content, options) {\n    return this.map(function (set) {\n      return set.inst._popover(content, this.button(this[0].node), options);\n    });\n  });\n\n  // Get the container elements\n  DataTable.Api.register('buttons().containers()', function () {\n    var jq = $();\n    var groupSelector = this._groupSelector;\n\n    // We need to use the group selector directly, since if there are no buttons\n    // the result set will be empty\n    this.iterator(true, 'table', function (ctx) {\n      if (ctx._buttons) {\n        var insts = Buttons.instanceSelector(groupSelector, ctx._buttons);\n        for (var i = 0, ien = insts.length; i < ien; i++) {\n          jq = jq.add(insts[i].container());\n        }\n      }\n    });\n    return jq;\n  });\n  DataTable.Api.register('buttons().container()', function () {\n    // API level of nesting is `buttons()` so we can zip into the containers method\n    return this.containers().eq(0);\n  });\n\n  // Add a new button\n  DataTable.Api.register('button().add()', function (idx, conf, draw) {\n    var ctx = this.context;\n\n    // Don't use `this` as it could be empty - select the instances directly\n    if (ctx.length) {\n      var inst = Buttons.instanceSelector(this._groupSelector, ctx[0]._buttons);\n      if (inst.length) {\n        inst[0].add(conf, idx, draw);\n      }\n    }\n    return this.button(this._groupSelector, idx);\n  });\n\n  // Destroy the button sets selected\n  DataTable.Api.register('buttons().destroy()', function () {\n    this.pluck('inst').unique().each(function (inst) {\n      inst.destroy();\n    });\n    return this;\n  });\n\n  // Remove a button\n  DataTable.Api.registerPlural('buttons().remove()', 'buttons().remove()', function () {\n    this.each(function (set) {\n      set.inst.remove(set.node);\n    });\n    return this;\n  });\n\n  // Information box that can be used by buttons\n  var _infoTimer;\n  DataTable.Api.register('buttons.info()', function (title, message, time) {\n    var that = this;\n    if (title === false) {\n      this.off('destroy.btn-info');\n      _fadeOut($('#datatables_buttons_info'), 400, function () {\n        $(this).remove();\n      });\n      clearTimeout(_infoTimer);\n      _infoTimer = null;\n      return this;\n    }\n    if (_infoTimer) {\n      clearTimeout(_infoTimer);\n    }\n    if ($('#datatables_buttons_info').length) {\n      $('#datatables_buttons_info').remove();\n    }\n    title = title ? '<h2>' + title + '</h2>' : '';\n    _fadeIn($('<div id=\"datatables_buttons_info\" class=\"dt-button-info\"/>').html(title).append($('<div/>')[typeof message === 'string' ? 'html' : 'append'](message)).css('display', 'none').appendTo('body'));\n    if (time !== undefined && time !== 0) {\n      _infoTimer = setTimeout(function () {\n        that.buttons.info(false);\n      }, time);\n    }\n    this.on('destroy.btn-info', function () {\n      that.buttons.info(false);\n    });\n    return this;\n  });\n\n  // Get data from the table for export - this is common to a number of plug-in\n  // buttons so it is included in the Buttons core library\n  DataTable.Api.register('buttons.exportData()', function (options) {\n    if (this.context.length) {\n      return _exportData(new DataTable.Api(this.context[0]), options);\n    }\n  });\n\n  // Get information about the export that is common to many of the export data\n  // types (DRY)\n  DataTable.Api.register('buttons.exportInfo()', function (conf) {\n    if (!conf) {\n      conf = {};\n    }\n    return {\n      filename: _filename(conf),\n      title: _title(conf),\n      messageTop: _message(this, conf.message || conf.messageTop, 'top'),\n      messageBottom: _message(this, conf.messageBottom, 'bottom')\n    };\n  });\n\n  /**\n   * Get the file name for an exported file.\n   *\n   * @param {object}\tconfig Button configuration\n   * @param {boolean} incExtension Include the file name extension\n   */\n  var _filename = function (config) {\n    // Backwards compatibility\n    var filename = config.filename === '*' && config.title !== '*' && config.title !== undefined && config.title !== null && config.title !== '' ? config.title : config.filename;\n    if (typeof filename === 'function') {\n      filename = filename();\n    }\n    if (filename === undefined || filename === null) {\n      return null;\n    }\n    if (filename.indexOf('*') !== -1) {\n      filename = filename.replace('*', $('head > title').text()).trim();\n    }\n\n    // Strip characters which the OS will object to\n    filename = filename.replace(/[^a-zA-Z0-9_\\u00A1-\\uFFFF\\.,\\-_ !\\(\\)]/g, \"\");\n    var extension = _stringOrFunction(config.extension);\n    if (!extension) {\n      extension = '';\n    }\n    return filename + extension;\n  };\n\n  /**\n   * Simply utility method to allow parameters to be given as a function\n   *\n   * @param {undefined|string|function} option Option\n   * @return {null|string} Resolved value\n   */\n  var _stringOrFunction = function (option) {\n    if (option === null || option === undefined) {\n      return null;\n    } else if (typeof option === 'function') {\n      return option();\n    }\n    return option;\n  };\n\n  /**\n   * Get the title for an exported file.\n   *\n   * @param {object} config\tButton configuration\n   */\n  var _title = function (config) {\n    var title = _stringOrFunction(config.title);\n    return title === null ? null : title.indexOf('*') !== -1 ? title.replace('*', $('head > title').text() || 'Exported data') : title;\n  };\n  var _message = function (dt, option, position) {\n    var message = _stringOrFunction(option);\n    if (message === null) {\n      return null;\n    }\n    var caption = $('caption', dt.table().container()).eq(0);\n    if (message === '*') {\n      var side = caption.css('caption-side');\n      if (side !== position) {\n        return null;\n      }\n      return caption.length ? caption.text() : '';\n    }\n    return message;\n  };\n  var _exportTextarea = $('<textarea/>')[0];\n  var _exportData = function (dt, inOpts) {\n    var config = $.extend(true, {}, {\n      rows: null,\n      columns: '',\n      modifier: {\n        search: 'applied',\n        order: 'applied'\n      },\n      orthogonal: 'display',\n      stripHtml: true,\n      stripNewlines: true,\n      decodeEntities: true,\n      trim: true,\n      format: {\n        header: function (d) {\n          return Buttons.stripData(d, config);\n        },\n        footer: function (d) {\n          return Buttons.stripData(d, config);\n        },\n        body: function (d) {\n          return Buttons.stripData(d, config);\n        }\n      },\n      customizeData: null\n    }, inOpts);\n    var header = dt.columns(config.columns).indexes().map(function (idx) {\n      var el = dt.column(idx).header();\n      return config.format.header(el.innerHTML, idx, el);\n    }).toArray();\n    var footer = dt.table().footer() ? dt.columns(config.columns).indexes().map(function (idx) {\n      var el = dt.column(idx).footer();\n      return config.format.footer(el ? el.innerHTML : '', idx, el);\n    }).toArray() : null;\n\n    // If Select is available on this table, and any rows are selected, limit the export\n    // to the selected rows. If no rows are selected, all rows will be exported. Specify\n    // a `selected` modifier to control directly.\n    var modifier = $.extend({}, config.modifier);\n    if (dt.select && typeof dt.select.info === 'function' && modifier.selected === undefined) {\n      if (dt.rows(config.rows, $.extend({\n        selected: true\n      }, modifier)).any()) {\n        $.extend(modifier, {\n          selected: true\n        });\n      }\n    }\n    var rowIndexes = dt.rows(config.rows, modifier).indexes().toArray();\n    var selectedCells = dt.cells(rowIndexes, config.columns);\n    var cells = selectedCells.render(config.orthogonal).toArray();\n    var cellNodes = selectedCells.nodes().toArray();\n    var columns = header.length;\n    var rows = columns > 0 ? cells.length / columns : 0;\n    var body = [];\n    var cellCounter = 0;\n    for (var i = 0, ien = rows; i < ien; i++) {\n      var row = [columns];\n      for (var j = 0; j < columns; j++) {\n        row[j] = config.format.body(cells[cellCounter], i, j, cellNodes[cellCounter]);\n        cellCounter++;\n      }\n      body[i] = row;\n    }\n    var data = {\n      header: header,\n      footer: footer,\n      body: body\n    };\n    if (config.customizeData) {\n      config.customizeData(data);\n    }\n    return data;\n  };\n\n  /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n   * DataTables interface\n   */\n\n  // Attach to DataTables objects for global access\n  $.fn.dataTable.Buttons = Buttons;\n  $.fn.DataTable.Buttons = Buttons;\n\n  // DataTables creation - check if the buttons have been defined for this table,\n  // they will have been if the `B` option was used in `dom`, otherwise we should\n  // create the buttons instance here so they can be inserted into the document\n  // using the API. Listen for `init` for compatibility with pre 1.10.10, but to\n  // be removed in future.\n  $(document).on('init.dt plugin-init.dt', function (e, settings) {\n    if (e.namespace !== 'dt') {\n      return;\n    }\n    var opts = settings.oInit.buttons || DataTable.defaults.buttons;\n    if (opts && !settings._buttons) {\n      new Buttons(settings, opts).container();\n    }\n  });\n  function _init(settings, options) {\n    var api = new DataTable.Api(settings);\n    var opts = options ? options : api.init().buttons || DataTable.defaults.buttons;\n    return new Buttons(api, opts).container();\n  }\n\n  // DataTables `dom` feature option\n  DataTable.ext.feature.push({\n    fnInit: _init,\n    cFeature: \"B\"\n  });\n\n  // DataTables 2 layout feature\n  if (DataTable.ext.features) {\n    DataTable.ext.features.register('buttons', _init);\n  }\n  return DataTable;\n});","map":{"version":3,"names":["factory","define","amd","$","window","document","exports","module","root","require","fn","dataTable","jQuery","undefined","DataTable","_instCounter","_buttonCounter","_dtButtons","ext","buttons","_fadeIn","el","duration","animate","stop","fadeIn","css","call","_fadeOut","fadeOut","Buttons","dt","config","settings","container","Array","isArray","c","extend","defaults","s","Api","listenKeys","namespace","dom","tag","addClass","className","_constructor","prototype","action","node","button","_nodeToButton","conf","active","flag","klass","jqNode","hasClass","toggleClass","add","idx","draw","split","base","i","ien","length","_expandButton","_draw","collectionRebuild","newButtons","remove","prefixButtons","unshift","apply","postfixButtons","push","newBtn","parentConf","collection","disable","disabled","prop","destroy","off","slice","buttonInsts","inst","splice","enable","removeClass","index","nested","inner","match","name","processing","table","triggerHandler","host","_nodeToHost","destroying","_removeKey","inArray","text","label","buttonLiner","linerTag","inCollection","opt","children","eq","filter","html","that","dtSettings","_buttons","on","e","activeElement","body","character","String","fromCharCode","keyCode","toLowerCase","indexOf","_keypress","_addKey","key","isPlainObject","detach","append","inserter","attachTo","inSplit","attachPoint","buttonCounter","isSplit","_resolveExtends","built","_buildButton","splitCollection","_collection","j","parent","collectionLayout","dropup","fade","splitDropdown","init","buttonDom","linerDom","collectionDom","splitDom","splitCollectionDom","splitDropdownButton","spacer","style","spacerClass","available","hasOwnProperty","clickBlurs","attr","iTabIndex","id","preventDefault","trigger","liner","enabled","titleAttr","buttonContainer","buttonCreated","splitDiv","splitWrapper","dropButtonConfig","closeButton","align","splitAlignClass","splitAction","dropButton","stopPropagation","get","ret","_buttonsHandled","run","click","shiftKey","altKey","ctrlKey","metaKey","recurse","a","join","toConfObject","loop","objArray","originalClassName","_popover","content","hostButton","inOpts","buttonsSettings","closed","options","autoClose","background","backgroundClassName","contentClassName","collectionTitle","popoverTitle","rightAlignClassName","hostNode","close","nodes","existingExpanded","closest","cnt","mod","display","role","appendTo","parents","lastChild","prepend","insertAfter","tableContainer","position","span","width","offsetParent","buttonPosition","buttonOffset","offset","tableSizes","containerPosition","computed","getComputedStyle","height","outerHeight","parseFloat","paddingLeft","right","left","bottom","top","popoverSizes","outerWidth","marginTop","marginBottom","scrollTop","half","backgroundHost","setTimeout","btn","back","addBack","target","elements","first","focus","last","show","insertPoint","instanceSelector","group","map","v","names","process","input","trim","buttonSelector","insts","selector","nodeBuilder","baseIdx","indexes","replace","each","nodeName","stripData","str","stripHtml","stripNewlines","decodeEntities","_exportTextarea","innerHTML","value","tabIndex","version","i18n","popover","type","copy","copyHtml5","csv","csvHtml5","excel","excelHtml5","pdf","pdfHtml5","pageLength","lengthMenu","aLengthMenu","vals","lang","_","page","len","option","val","register","buttonGroup","res","iterator","ctx","_groupSelector","registerPlural","set","jq","groupSelector","containers","context","pluck","unique","_infoTimer","title","message","time","clearTimeout","info","_exportData","filename","_filename","_title","messageTop","_message","messageBottom","extension","_stringOrFunction","caption","side","rows","columns","modifier","search","order","orthogonal","format","header","d","footer","customizeData","column","toArray","select","selected","any","rowIndexes","selectedCells","cells","render","cellNodes","cellCounter","row","data","opts","oInit","_init","api","feature","fnInit","cFeature","features"],"sources":["D:/React/eservices/node_modules/datatables.net-buttons/js/dataTables.buttons.js"],"sourcesContent":["/*! Buttons for DataTables 2.3.4\n * Â©2016-2023 SpryMedia Ltd - datatables.net/license\n */\n\n(function( factory ){\n\tif ( typeof define === 'function' && define.amd ) {\n\t\t// AMD\n\t\tdefine( ['jquery', 'datatables.net'], function ( $ ) {\n\t\t\treturn factory( $, window, document );\n\t\t} );\n\t}\n\telse if ( typeof exports === 'object' ) {\n\t\t// CommonJS\n\t\tmodule.exports = function (root, $) {\n\t\t\tif ( ! root ) {\n\t\t\t\t// CommonJS environments without a window global must pass a\n\t\t\t\t// root. This will give an error otherwise\n\t\t\t\troot = window;\n\t\t\t}\n\n\t\t\tif ( ! $ ) {\n\t\t\t\t$ = typeof window !== 'undefined' ? // jQuery's factory checks for a global window\n\t\t\t\t\trequire('jquery') :\n\t\t\t\t\trequire('jquery')( root );\n\t\t\t}\n\n\t\t\tif ( ! $.fn.dataTable ) {\n\t\t\t\trequire('datatables.net')(root, $);\n\t\t\t}\n\n\t\t\treturn factory( $, root, root.document );\n\t\t};\n\t}\n\telse {\n\t\t// Browser\n\t\tfactory( jQuery, window, document );\n\t}\n}(function( $, window, document, undefined ) {\n'use strict';\nvar DataTable = $.fn.dataTable;\n\n\n\n// Used for namespacing events added to the document by each instance, so they\n// can be removed on destroy\nvar _instCounter = 0;\n\n// Button namespacing counter for namespacing events on individual buttons\nvar _buttonCounter = 0;\n\nvar _dtButtons = DataTable.ext.buttons;\n\n// Allow for jQuery slim\nfunction _fadeIn(el, duration, fn) {\n\tif ($.fn.animate) {\n\t\tel\n\t\t\t.stop()\n\t\t\t.fadeIn( duration, fn );\n\n\t}\n\telse {\n\t\tel.css('display', 'block');\n\n\t\tif (fn) {\n\t\t\tfn.call(el);\n\t\t}\n\t}\n}\n\nfunction _fadeOut(el, duration, fn) {\n\tif ($.fn.animate) {\n\t\tel\n\t\t\t.stop()\n\t\t\t.fadeOut( duration, fn );\n\t}\n\telse {\n\t\tel.css('display', 'none');\n\t\t\n\t\tif (fn) {\n\t\t\tfn.call(el);\n\t\t}\n\t}\n}\n\n/**\n * [Buttons description]\n * @param {[type]}\n * @param {[type]}\n */\nvar Buttons = function( dt, config )\n{\n\t// If not created with a `new` keyword then we return a wrapper function that\n\t// will take the settings object for a DT. This allows easy use of new instances\n\t// with the `layout` option - e.g. `topLeft: $.fn.dataTable.Buttons( ... )`.\n\tif ( !(this instanceof Buttons) ) {\n\t\treturn function (settings) {\n\t\t\treturn new Buttons( settings, dt ).container();\n\t\t};\n\t}\n\n\t// If there is no config set it to an empty object\n\tif ( typeof( config ) === 'undefined' ) {\n\t\tconfig = {};\t\n\t}\n\t\n\t// Allow a boolean true for defaults\n\tif ( config === true ) {\n\t\tconfig = {};\n\t}\n\n\t// For easy configuration of buttons an array can be given\n\tif ( Array.isArray( config ) ) {\n\t\tconfig = { buttons: config };\n\t}\n\n\tthis.c = $.extend( true, {}, Buttons.defaults, config );\n\n\t// Don't want a deep copy for the buttons\n\tif ( config.buttons ) {\n\t\tthis.c.buttons = config.buttons;\n\t}\n\n\tthis.s = {\n\t\tdt: new DataTable.Api( dt ),\n\t\tbuttons: [],\n\t\tlistenKeys: '',\n\t\tnamespace: 'dtb'+(_instCounter++)\n\t};\n\n\tthis.dom = {\n\t\tcontainer: $('<'+this.c.dom.container.tag+'/>')\n\t\t\t.addClass( this.c.dom.container.className )\n\t};\n\n\tthis._constructor();\n};\n\n\n$.extend( Buttons.prototype, {\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Public methods\n\t */\n\n\t/**\n\t * Get the action of a button\n\t * @param  {int|string} Button index\n\t * @return {function}\n\t *//**\n\t * Set the action of a button\n\t * @param  {node} node Button element\n\t * @param  {function} action Function to set\n\t * @return {Buttons} Self for chaining\n\t */\n\taction: function ( node, action )\n\t{\n\t\tvar button = this._nodeToButton( node );\n\n\t\tif ( action === undefined ) {\n\t\t\treturn button.conf.action;\n\t\t}\n\n\t\tbutton.conf.action = action;\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Add an active class to the button to make to look active or get current\n\t * active state.\n\t * @param  {node} node Button element\n\t * @param  {boolean} [flag] Enable / disable flag\n\t * @return {Buttons} Self for chaining or boolean for getter\n\t */\n\tactive: function ( node, flag ) {\n\t\tvar button = this._nodeToButton( node );\n\t\tvar klass = this.c.dom.button.active;\n\t\tvar jqNode = $(button.node);\n\n\t\tif ( flag === undefined ) {\n\t\t\treturn jqNode.hasClass( klass );\n\t\t}\n\n\t\tjqNode.toggleClass( klass, flag === undefined ? true : flag );\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Add a new button\n\t * @param {object} config Button configuration object, base string name or function\n\t * @param {int|string} [idx] Button index for where to insert the button\n\t * @param {boolean} [draw=true] Trigger a draw. Set a false when adding\n\t *   lots of buttons, until the last button.\n\t * @return {Buttons} Self for chaining\n\t */\n\tadd: function ( config, idx, draw )\n\t{\n\t\tvar buttons = this.s.buttons;\n\n\t\tif ( typeof idx === 'string' ) {\n\t\t\tvar split = idx.split('-');\n\t\t\tvar base = this.s;\n\n\t\t\tfor ( var i=0, ien=split.length-1 ; i<ien ; i++ ) {\n\t\t\t\tbase = base.buttons[ split[i]*1 ];\n\t\t\t}\n\n\t\t\tbuttons = base.buttons;\n\t\t\tidx = split[ split.length-1 ]*1;\n\t\t}\n\n\t\tthis._expandButton(\n\t\t\tbuttons,\n\t\t\tconfig,\n\t\t\tconfig !== undefined ? config.split : undefined,\n\t\t\t(config === undefined || config.split === undefined || config.split.length === 0) && base !== undefined,\n\t\t\tfalse,\n\t\t\tidx\n\t\t);\n\n\t\tif (draw === undefined || draw === true) {\n\t\t\tthis._draw();\n\t\t}\n\t\n\t\treturn this;\n\t},\n\n\t/**\n\t * Clear buttons from a collection and then insert new buttons\n\t */\n\tcollectionRebuild: function ( node, newButtons )\n\t{\n\t\tvar button = this._nodeToButton( node );\n\t\t\n\t\tif(newButtons !== undefined) {\n\t\t\tvar i;\n\t\t\t// Need to reverse the array\n\t\t\tfor (i=button.buttons.length-1; i>=0; i--) {\n\t\t\t\tthis.remove(button.buttons[i].node);\n\t\t\t}\n\n\t\t\t// If the collection has prefix and / or postfix buttons we need to add them in\n\t\t\tif (button.conf.prefixButtons) {\n\t\t\t\tnewButtons.unshift.apply(newButtons, button.conf.prefixButtons);\n\t\t\t}\n\n\t\t\tif (button.conf.postfixButtons) {\n\t\t\t\tnewButtons.push.apply(newButtons, button.conf.postfixButtons);\n\t\t\t}\n\n\t\t\tfor (i=0; i<newButtons.length; i++) {\n\t\t\t\tvar newBtn = newButtons[i];\n\n\t\t\t\tthis._expandButton(\n\t\t\t\t\tbutton.buttons,\n\t\t\t\t\tnewBtn,\n\t\t\t\t\tnewBtn !== undefined && newBtn.config !== undefined && newBtn.config.split !== undefined,\n\t\t\t\t\ttrue,\n\t\t\t\t\tnewBtn.parentConf !== undefined && newBtn.parentConf.split !== undefined,\n\t\t\t\t\tnull,\n\t\t\t\t\tnewBtn.parentConf\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis._draw(button.collection, button.buttons);\n\t},\n\n\t/**\n\t * Get the container node for the buttons\n\t * @return {jQuery} Buttons node\n\t */\n\tcontainer: function ()\n\t{\n\t\treturn this.dom.container;\n\t},\n\n\t/**\n\t * Disable a button\n\t * @param  {node} node Button node\n\t * @return {Buttons} Self for chaining\n\t */\n\tdisable: function ( node ) {\n\t\tvar button = this._nodeToButton( node );\n\n\t\t$(button.node)\n\t\t\t.addClass( this.c.dom.button.disabled )\n\t\t\t.prop('disabled', true);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Destroy the instance, cleaning up event handlers and removing DOM\n\t * elements\n\t * @return {Buttons} Self for chaining\n\t */\n\tdestroy: function ()\n\t{\n\t\t// Key event listener\n\t\t$('body').off( 'keyup.'+this.s.namespace );\n\n\t\t// Individual button destroy (so they can remove their own events if\n\t\t// needed). Take a copy as the array is modified by `remove`\n\t\tvar buttons = this.s.buttons.slice();\n\t\tvar i, ien;\n\t\t\n\t\tfor ( i=0, ien=buttons.length ; i<ien ; i++ ) {\n\t\t\tthis.remove( buttons[i].node );\n\t\t}\n\n\t\t// Container\n\t\tthis.dom.container.remove();\n\n\t\t// Remove from the settings object collection\n\t\tvar buttonInsts = this.s.dt.settings()[0];\n\n\t\tfor ( i=0, ien=buttonInsts.length ; i<ien ; i++ ) {\n\t\t\tif ( buttonInsts.inst === this ) {\n\t\t\t\tbuttonInsts.splice( i, 1 );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Enable / disable a button\n\t * @param  {node} node Button node\n\t * @param  {boolean} [flag=true] Enable / disable flag\n\t * @return {Buttons} Self for chaining\n\t */\n\tenable: function ( node, flag )\n\t{\n\t\tif ( flag === false ) {\n\t\t\treturn this.disable( node );\n\t\t}\n\n\t\tvar button = this._nodeToButton( node );\n\t\t$(button.node)\n\t\t\t.removeClass( this.c.dom.button.disabled )\n\t\t\t.prop('disabled', false);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Get a button's index\n\t * \n\t * This is internally recursive\n\t * @param {element} node Button to get the index of\n\t * @return {string} Button index\n\t */\n\tindex: function ( node, nested, buttons )\n\t{\n\t\tif ( ! nested ) {\n\t\t\tnested = '';\n\t\t\tbuttons = this.s.buttons;\n\t\t}\n\n\t\tfor ( var i=0, ien=buttons.length ; i<ien ; i++ ) {\n\t\t\tvar inner = buttons[i].buttons;\n\n\t\t\tif (buttons[i].node === node) {\n\t\t\t\treturn nested + i;\n\t\t\t}\n\n\t\t\tif ( inner && inner.length ) {\n\t\t\t\tvar match = this.index(node, i + '-', inner);\n\n\t\t\t\tif (match !== null) {\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\n\t/**\n\t * Get the instance name for the button set selector\n\t * @return {string} Instance name\n\t */\n\tname: function ()\n\t{\n\t\treturn this.c.name;\n\t},\n\n\t/**\n\t * Get a button's node of the buttons container if no button is given\n\t * @param  {node} [node] Button node\n\t * @return {jQuery} Button element, or container\n\t */\n\tnode: function ( node )\n\t{\n\t\tif ( ! node ) {\n\t\t\treturn this.dom.container;\n\t\t}\n\n\t\tvar button = this._nodeToButton( node );\n\t\treturn $(button.node);\n\t},\n\n\t/**\n\t * Set / get a processing class on the selected button\n\t * @param {element} node Triggering button node\n\t * @param  {boolean} flag true to add, false to remove, undefined to get\n\t * @return {boolean|Buttons} Getter value or this if a setter.\n\t */\n\tprocessing: function ( node, flag )\n\t{\n\t\tvar dt = this.s.dt;\n\t\tvar button = this._nodeToButton( node );\n\n\t\tif ( flag === undefined ) {\n\t\t\treturn $(button.node).hasClass( 'processing' );\n\t\t}\n\n\t\t$(button.node).toggleClass( 'processing', flag );\n\n\t\t$(dt.table().node()).triggerHandler( 'buttons-processing.dt', [\n\t\t\tflag, dt.button( node ), dt, $(node), button.conf\n\t\t] );\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Remove a button.\n\t * @param  {node} node Button node\n\t * @return {Buttons} Self for chaining\n\t */\n\tremove: function ( node )\n\t{\n\t\tvar button = this._nodeToButton( node );\n\t\tvar host = this._nodeToHost( node );\n\t\tvar dt = this.s.dt;\n\n\t\t// Remove any child buttons first\n\t\tif ( button.buttons.length ) {\n\t\t\tfor ( var i=button.buttons.length-1 ; i>=0 ; i-- ) {\n\t\t\t\tthis.remove( button.buttons[i].node );\n\t\t\t}\n\t\t}\n\n\t\tbutton.conf.destroying = true;\n\n\t\t// Allow the button to remove event handlers, etc\n\t\tif ( button.conf.destroy ) {\n\t\t\tbutton.conf.destroy.call( dt.button(node), dt, $(node), button.conf );\n\t\t}\n\n\t\tthis._removeKey( button.conf );\n\n\t\t$(button.node).remove();\n\n\t\tvar idx = $.inArray( button, host );\n\t\thost.splice( idx, 1 );\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Get the text for a button\n\t * @param  {int|string} node Button index\n\t * @return {string} Button text\n\t *//**\n\t * Set the text for a button\n\t * @param  {int|string|function} node Button index\n\t * @param  {string} label Text\n\t * @return {Buttons} Self for chaining\n\t */\n\ttext: function ( node, label )\n\t{\n\t\tvar button = this._nodeToButton( node );\n\t\tvar buttonLiner = this.c.dom.collection.buttonLiner;\n\t\tvar linerTag = button.inCollection && buttonLiner && buttonLiner.tag ?\n\t\t\tbuttonLiner.tag :\n\t\t\tthis.c.dom.buttonLiner.tag;\n\t\tvar dt = this.s.dt;\n\t\tvar jqNode = $(button.node);\n\t\tvar text = function ( opt ) {\n\t\t\treturn typeof opt === 'function' ?\n\t\t\t\topt( dt, jqNode, button.conf ) :\n\t\t\t\topt;\n\t\t};\n\n\t\tif ( label === undefined ) {\n\t\t\treturn text( button.conf.text );\n\t\t}\n\n\t\tbutton.conf.text = label;\n\n\t\tif ( linerTag ) {\n\t\t\tjqNode\n\t\t\t\t.children( linerTag )\n\t\t\t\t.eq(0)\n\t\t\t\t.filter(':not(.dt-down-arrow)')\n\t\t\t\t.html( text(label) );\n\t\t}\n\t\telse {\n\t\t\tjqNode.html( text(label) );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Constructor\n\t */\n\n\t/**\n\t * Buttons constructor\n\t * @private\n\t */\n\t_constructor: function ()\n\t{\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\t\tvar dtSettings = dt.settings()[0];\n\t\tvar buttons =  this.c.buttons;\n\n\t\tif ( ! dtSettings._buttons ) {\n\t\t\tdtSettings._buttons = [];\n\t\t}\n\n\t\tdtSettings._buttons.push( {\n\t\t\tinst: this,\n\t\t\tname: this.c.name\n\t\t} );\n\n\t\tfor ( var i=0, ien=buttons.length ; i<ien ; i++ ) {\n\t\t\tthis.add( buttons[i] );\n\t\t}\n\n\t\tdt.on( 'destroy', function ( e, settings ) {\n\t\t\tif ( settings === dtSettings ) {\n\t\t\t\tthat.destroy();\n\t\t\t}\n\t\t} );\n\n\t\t// Global key event binding to listen for button keys\n\t\t$('body').on( 'keyup.'+this.s.namespace, function ( e ) {\n\t\t\tif ( ! document.activeElement || document.activeElement === document.body ) {\n\t\t\t\t// SUse a string of characters for fast lookup of if we need to\n\t\t\t\t// handle this\n\t\t\t\tvar character = String.fromCharCode(e.keyCode).toLowerCase();\n\n\t\t\t\tif ( that.s.listenKeys.toLowerCase().indexOf( character ) !== -1 ) {\n\t\t\t\t\tthat._keypress( character, e );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Private methods\n\t */\n\n\t/**\n\t * Add a new button to the key press listener\n\t * @param {object} conf Resolved button configuration object\n\t * @private\n\t */\n\t_addKey: function ( conf )\n\t{\n\t\tif ( conf.key ) {\n\t\t\tthis.s.listenKeys += $.isPlainObject( conf.key ) ?\n\t\t\t\tconf.key.key :\n\t\t\t\tconf.key;\n\t\t}\n\t},\n\n\t/**\n\t * Insert the buttons into the container. Call without parameters!\n\t * @param  {node} [container] Recursive only - Insert point\n\t * @param  {array} [buttons] Recursive only - Buttons array\n\t * @private\n\t */\n\t_draw: function ( container, buttons )\n\t{\n\t\tif ( ! container ) {\n\t\t\tcontainer = this.dom.container;\n\t\t\tbuttons = this.s.buttons;\n\t\t}\n\n\t\tcontainer.children().detach();\n\n\t\tfor ( var i=0, ien=buttons.length ; i<ien ; i++ ) {\n\t\t\tcontainer.append( buttons[i].inserter );\n\t\t\tcontainer.append( ' ' );\n\n\t\t\tif ( buttons[i].buttons && buttons[i].buttons.length ) {\n\t\t\t\tthis._draw( buttons[i].collection, buttons[i].buttons );\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Create buttons from an array of buttons\n\t * @param  {array} attachTo Buttons array to attach to\n\t * @param  {object} button Button definition\n\t * @param  {boolean} inCollection true if the button is in a collection\n\t * @private\n\t */\n\t_expandButton: function ( attachTo, button, split, inCollection, inSplit, attachPoint, parentConf )\n\t{\n\t\tvar dt = this.s.dt;\n\t\tvar buttonCounter = 0;\n\t\tvar isSplit = false;\n\t\tvar buttons = ! Array.isArray( button ) ?\n\t\t\t[ button ] :\n\t\t\tbutton;\n\t\t\n\t\tif(button === undefined ) {\n\t\t\tbuttons = !Array.isArray(split) ?\n\t\t\t\t[ split ] :\n\t\t\t\tsplit;\n\t\t}\n\n\t\tif (button !== undefined && button.split !== undefined) {\n\t\t\tisSplit = true;\n\t\t}\n\t\t\t\n\t\tfor ( var i=0, ien=buttons.length ; i<ien ; i++ ) {\n\t\t\tvar conf = this._resolveExtends( buttons[i] );\n\n\t\t\tif ( ! conf ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif( conf.config !== undefined && conf.config.split) {\n\t\t\t\tisSplit = true;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tisSplit = false;\n\t\t\t}\n\t\t\t\n\t\t\t// If the configuration is an array, then expand the buttons at this\n\t\t\t// point\n\t\t\tif ( Array.isArray( conf ) ) {\n\t\t\t\tthis._expandButton( attachTo, conf, built !== undefined && built.conf !== undefined ? built.conf.split : undefined, inCollection, parentConf !== undefined && parentConf.split !== undefined, attachPoint, parentConf );\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar built = this._buildButton( conf, inCollection, conf.split !== undefined || (conf.config !== undefined && conf.config.split !== undefined), inSplit );\n\t\t\tif ( ! built ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( attachPoint !== undefined && attachPoint !== null ) {\n\t\t\t\tattachTo.splice( attachPoint, 0, built );\n\t\t\t\tattachPoint++;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tattachTo.push( built );\n\t\t\t}\n\n\t\t\t\n\t\t\tif ( built.conf.buttons || built.conf.split ) {\n\t\t\t\tbuilt.collection = $('<'+(isSplit ? this.c.dom.splitCollection.tag : this.c.dom.collection.tag)+'/>');\n\n\t\t\t\tbuilt.conf._collection = built.collection;\n\n\t\t\t\tif(built.conf.split) {\n\t\t\t\t\tfor(var j = 0; j < built.conf.split.length; j++) {\n\t\t\t\t\t\tif(typeof built.conf.split[j] === \"object\") {\n\t\t\t\t\t\t\tbuilt.conf.split[j].parent = parentConf;\n\t\t\t\t\t\t\tif(built.conf.split[j].collectionLayout === undefined) {\n\t\t\t\t\t\t\t\tbuilt.conf.split[j].collectionLayout = built.conf.collectionLayout;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(built.conf.split[j].dropup === undefined) {\n\t\t\t\t\t\t\t\tbuilt.conf.split[j].dropup = built.conf.dropup;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(built.conf.split[j].fade === undefined) {\n\t\t\t\t\t\t\t\tbuilt.conf.split[j].fade = built.conf.fade;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$(built.node).append($('<span class=\"dt-down-arrow\">'+this.c.dom.splitDropdown.text+'</span>'))\n\t\t\t\t}\n\n\t\t\t\tthis._expandButton( built.buttons, built.conf.buttons, built.conf.split, !isSplit, isSplit, attachPoint, built.conf );\n\t\t\t}\n\t\t\tbuilt.conf.parent = parentConf;\n\n\t\t\t// init call is made here, rather than buildButton as it needs to\n\t\t\t// be selectable, and for that it needs to be in the buttons array\n\t\t\tif ( conf.init ) {\n\t\t\t\tconf.init.call( dt.button( built.node ), dt, $(built.node), conf );\n\t\t\t}\n\n\t\t\tbuttonCounter++;\n\t\t}\n\t},\n\n\t/**\n\t * Create an individual button\n\t * @param  {object} config            Resolved button configuration\n\t * @param  {boolean} inCollection `true` if a collection button\n\t * @return {jQuery} Created button node (jQuery)\n\t * @private\n\t */\n\t_buildButton: function ( config, inCollection, isSplit, inSplit )\n\t{\n\t\tvar buttonDom = this.c.dom.button;\n\t\tvar linerDom = this.c.dom.buttonLiner;\n\t\tvar collectionDom = this.c.dom.collection;\n\t\tvar splitDom = this.c.dom.split;\n\t\tvar splitCollectionDom = this.c.dom.splitCollection;\n\t\tvar splitDropdownButton = this.c.dom.splitDropdownButton;\n\t\tvar dt = this.s.dt;\n\t\tvar text = function ( opt ) {\n\t\t\treturn typeof opt === 'function' ?\n\t\t\t\topt( dt, button, config ) :\n\t\t\t\topt;\n\t\t};\n\n\t\t// Spacers don't do much other than insert an element into the DOM\n\t\tif (config.spacer) {\n\t\t\tvar spacer = $('<span></span>')\n\t\t\t\t.addClass('dt-button-spacer ' + config.style + ' ' + buttonDom.spacerClass)\n\t\t\t\t.html(text(config.text));\n\n\t\t\treturn {\n\t\t\t\tconf:         config,\n\t\t\t\tnode:         spacer,\n\t\t\t\tinserter:     spacer,\n\t\t\t\tbuttons:      [],\n\t\t\t\tinCollection: inCollection,\n\t\t\t\tisSplit:\t  isSplit,\n\t\t\t\tinSplit:\t  inSplit,\n\t\t\t\tcollection:   null\n\t\t\t};\n\t\t}\n\n\t\tif ( !isSplit && inSplit && splitCollectionDom ) {\n\t\t\tbuttonDom = splitDropdownButton;\n\t\t}\n\t\telse if ( !isSplit && inCollection && collectionDom.button ) {\n\t\t\tbuttonDom = collectionDom.button;\n\t\t} \n\n\t\tif ( !isSplit && inSplit && splitCollectionDom.buttonLiner ) {\n\t\t\tlinerDom = splitCollectionDom.buttonLiner\n\t\t}\n\t\telse if ( !isSplit && inCollection && collectionDom.buttonLiner ) {\n\t\t\tlinerDom = collectionDom.buttonLiner;\n\t\t}\n\n\t\t// Make sure that the button is available based on whatever requirements\n\t\t// it has. For example, PDF button require pdfmake\n\t\tif ( config.available && ! config.available( dt, config ) && !config.hasOwnProperty('html') ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar button;\n\t\tif(!config.hasOwnProperty('html')) {\n\t\t\tvar action = function ( e, dt, button, config ) {\n\t\t\t\tconfig.action.call( dt.button( button ), e, dt, button, config );\n\t\n\t\t\t\t$(dt.table().node()).triggerHandler( 'buttons-action.dt', [\n\t\t\t\t\tdt.button( button ), dt, button, config \n\t\t\t\t] );\n\t\t\t};\n\n\t\t\tvar tag = config.tag || buttonDom.tag;\n\t\t\tvar clickBlurs = config.clickBlurs === undefined\n\t\t\t\t? true :\n\t\t\t\tconfig.clickBlurs;\n\n\t\t\tbutton = $('<'+tag+'/>')\n\t\t\t\t.addClass( buttonDom.className )\n\t\t\t\t.addClass( inSplit ? this.c.dom.splitDropdownButton.className : '')\n\t\t\t\t.attr( 'tabindex', this.s.dt.settings()[0].iTabIndex )\n\t\t\t\t.attr( 'aria-controls', this.s.dt.table().node().id )\n\t\t\t\t.on( 'click.dtb', function (e) {\n\t\t\t\t\te.preventDefault();\n\t\n\t\t\t\t\tif ( ! button.hasClass( buttonDom.disabled ) && config.action ) {\n\t\t\t\t\t\taction( e, dt, button, config );\n\t\t\t\t\t}\n\t\t\t\t\tif( clickBlurs ) {\n\t\t\t\t\t\tbutton.trigger('blur');\n\t\t\t\t\t}\n\t\t\t\t} )\n\t\t\t\t.on( 'keypress.dtb', function (e) {\n\t\t\t\t\tif ( e.keyCode === 13 ) {\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\tif ( ! button.hasClass( buttonDom.disabled ) && config.action ) {\n\t\t\t\t\t\t\taction( e, dt, button, config );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\n\t\t\t// Make `a` tags act like a link\n\t\t\tif ( tag.toLowerCase() === 'a' ) {\n\t\t\t\tbutton.attr( 'href', '#' );\n\t\t\t}\n\t\n\t\t\t// Button tags should have `type=button` so they don't have any default behaviour\n\t\t\tif ( tag.toLowerCase() === 'button' ) {\n\t\t\t\tbutton.attr( 'type', 'button' );\n\t\t\t}\n\t\n\t\t\tif ( linerDom.tag ) {\n\t\t\t\tvar liner = $('<'+linerDom.tag+'/>')\n\t\t\t\t\t.html( text( config.text ) )\n\t\t\t\t\t.addClass( linerDom.className );\n\t\n\t\t\t\tif ( linerDom.tag.toLowerCase() === 'a' ) {\n\t\t\t\t\tliner.attr( 'href', '#' );\n\t\t\t\t}\n\t\n\t\t\t\tbutton.append( liner );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tbutton.html( text( config.text ) );\n\t\t\t}\n\t\n\t\t\tif ( config.enabled === false ) {\n\t\t\t\tbutton.addClass( buttonDom.disabled );\n\t\t\t}\n\t\n\t\t\tif ( config.className ) {\n\t\t\t\tbutton.addClass( config.className );\n\t\t\t}\n\t\n\t\t\tif ( config.titleAttr ) {\n\t\t\t\tbutton.attr( 'title', text( config.titleAttr ) );\n\t\t\t}\n\t\n\t\t\tif ( config.attr ) {\n\t\t\t\tbutton.attr( config.attr );\n\t\t\t}\n\t\n\t\t\tif ( ! config.namespace ) {\n\t\t\t\tconfig.namespace = '.dt-button-'+(_buttonCounter++);\n\t\t\t}\n\n\t\t\tif  ( config.config !== undefined && config.config.split ) {\n\t\t\t\tconfig.split = config.config.split;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tbutton = $(config.html)\n\t\t}\n\t\n\t\tvar buttonContainer = this.c.dom.buttonContainer;\n\t\tvar inserter;\n\t\tif ( buttonContainer && buttonContainer.tag ) {\n\t\t\tinserter = $('<'+buttonContainer.tag+'/>')\n\t\t\t\t.addClass( buttonContainer.className )\n\t\t\t\t.append( button );\n\t\t}\n\t\telse {\n\t\t\tinserter = button;\n\t\t}\n\n\t\tthis._addKey( config );\n\n\t\t// Style integration callback for DOM manipulation\n\t\t// Note that this is _not_ documented. It is currently\n\t\t// for style integration only\n\t\tif( this.c.buttonCreated ) {\n\t\t\tinserter = this.c.buttonCreated( config, inserter );\n\t\t}\n\n\t\tvar splitDiv;\n\t\tif(isSplit) {\n\t\t\tsplitDiv = $('<div/>').addClass(this.c.dom.splitWrapper.className)\n\t\t\tsplitDiv.append(button);\n\t\t\tvar dropButtonConfig = $.extend(config, {\n\t\t\t\ttext: this.c.dom.splitDropdown.text,\n\t\t\t\tclassName: this.c.dom.splitDropdown.className,\n\t\t\t\tcloseButton: false,\n\t\t\t\tattr: {\n\t\t\t\t\t'aria-haspopup': 'dialog',\n\t\t\t\t\t'aria-expanded': false\n\t\t\t\t},\n\t\t\t\talign: this.c.dom.splitDropdown.align,\n\t\t\t\tsplitAlignClass: this.c.dom.splitDropdown.splitAlignClass\n\t\t\t\t\n\t\t\t})\n\n\t\t\tthis._addKey(dropButtonConfig);\n\n\t\t\tvar splitAction = function ( e, dt, button, config ) {\n\t\t\t\t_dtButtons.split.action.call( dt.button(splitDiv), e, dt, button, config );\n\t\n\t\t\t\t$(dt.table().node()).triggerHandler( 'buttons-action.dt', [\n\t\t\t\t\tdt.button( button ), dt, button, config \n\t\t\t\t] );\n\t\t\t\tbutton.attr('aria-expanded', true)\n\t\t\t};\n\t\t\t\n\t\t\tvar dropButton = $('<button class=\"' + this.c.dom.splitDropdown.className + ' dt-button\"><span class=\"dt-btn-split-drop-arrow\">'+this.c.dom.splitDropdown.text+'</span></button>')\n\t\t\t\t.on( 'click.dtb', function (e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\tif ( ! dropButton.hasClass( buttonDom.disabled )) {\n\t\t\t\t\t\tsplitAction( e, dt, dropButton, dropButtonConfig );\n\t\t\t\t\t}\n\t\t\t\t\tif ( clickBlurs ) {\n\t\t\t\t\t\tdropButton.trigger('blur');\n\t\t\t\t\t}\n\t\t\t\t} )\n\t\t\t\t.on( 'keypress.dtb', function (e) {\n\t\t\t\t\tif ( e.keyCode === 13 ) {\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\tif ( ! dropButton.hasClass( buttonDom.disabled ) ) {\n\t\t\t\t\t\t\tsplitAction( e, dt, dropButton, dropButtonConfig );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\tif(config.split.length === 0) {\n\t\t\t\tdropButton.addClass('dtb-hide-drop');\n\t\t\t}\n\n\t\t\tsplitDiv.append(dropButton).attr(dropButtonConfig.attr);\n\t\t}\n\n\t\treturn {\n\t\t\tconf:         config,\n\t\t\tnode:         isSplit ? splitDiv.get(0) : button.get(0),\n\t\t\tinserter:     isSplit ? splitDiv : inserter,\n\t\t\tbuttons:      [],\n\t\t\tinCollection: inCollection,\n\t\t\tisSplit:\t  isSplit,\n\t\t\tinSplit:\t  inSplit,\n\t\t\tcollection:   null\n\t\t};\n\t},\n\n\t/**\n\t * Get the button object from a node (recursive)\n\t * @param  {node} node Button node\n\t * @param  {array} [buttons] Button array, uses base if not defined\n\t * @return {object} Button object\n\t * @private\n\t */\n\t_nodeToButton: function ( node, buttons )\n\t{\n\t\tif ( ! buttons ) {\n\t\t\tbuttons = this.s.buttons;\n\t\t}\n\n\t\tfor ( var i=0, ien=buttons.length ; i<ien ; i++ ) {\n\t\t\tif ( buttons[i].node === node ) {\n\t\t\t\treturn buttons[i];\n\t\t\t}\n\n\t\t\tif ( buttons[i].buttons.length ) {\n\t\t\t\tvar ret = this._nodeToButton( node, buttons[i].buttons );\n\n\t\t\t\tif ( ret ) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Get container array for a button from a button node (recursive)\n\t * @param  {node} node Button node\n\t * @param  {array} [buttons] Button array, uses base if not defined\n\t * @return {array} Button's host array\n\t * @private\n\t */\n\t_nodeToHost: function ( node, buttons )\n\t{\n\t\tif ( ! buttons ) {\n\t\t\tbuttons = this.s.buttons;\n\t\t}\n\n\t\tfor ( var i=0, ien=buttons.length ; i<ien ; i++ ) {\n\t\t\tif ( buttons[i].node === node ) {\n\t\t\t\treturn buttons;\n\t\t\t}\n\n\t\t\tif ( buttons[i].buttons.length ) {\n\t\t\t\tvar ret = this._nodeToHost( node, buttons[i].buttons );\n\n\t\t\t\tif ( ret ) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Handle a key press - determine if any button's key configured matches\n\t * what was typed and trigger the action if so.\n\t * @param  {string} character The character pressed\n\t * @param  {object} e Key event that triggered this call\n\t * @private\n\t */\n\t_keypress: function ( character, e )\n\t{\n\t\t// Check if this button press already activated on another instance of Buttons\n\t\tif ( e._buttonsHandled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar run = function ( conf, node ) {\n\t\t\tif ( ! conf.key ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( conf.key === character ) {\n\t\t\t\te._buttonsHandled = true;\n\t\t\t\t$(node).click();\n\t\t\t}\n\t\t\telse if ( $.isPlainObject( conf.key ) ) {\n\t\t\t\tif ( conf.key.key !== character ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( conf.key.shiftKey && ! e.shiftKey ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( conf.key.altKey && ! e.altKey ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( conf.key.ctrlKey && ! e.ctrlKey ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( conf.key.metaKey && ! e.metaKey ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Made it this far - it is good\n\t\t\t\te._buttonsHandled = true;\n\t\t\t\t$(node).click();\n\t\t\t}\n\t\t};\n\n\t\tvar recurse = function ( a ) {\n\t\t\tfor ( var i=0, ien=a.length ; i<ien ; i++ ) {\n\t\t\t\trun( a[i].conf, a[i].node );\n\n\t\t\t\tif ( a[i].buttons.length ) {\n\t\t\t\t\trecurse( a[i].buttons );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\trecurse( this.s.buttons );\n\t},\n\n\t/**\n\t * Remove a key from the key listener for this instance (to be used when a\n\t * button is removed)\n\t * @param  {object} conf Button configuration\n\t * @private\n\t */\n\t_removeKey: function ( conf )\n\t{\n\t\tif ( conf.key ) {\n\t\t\tvar character = $.isPlainObject( conf.key ) ?\n\t\t\t\tconf.key.key :\n\t\t\t\tconf.key;\n\n\t\t\t// Remove only one character, as multiple buttons could have the\n\t\t\t// same listening key\n\t\t\tvar a = this.s.listenKeys.split('');\n\t\t\tvar idx = $.inArray( character, a );\n\t\t\ta.splice( idx, 1 );\n\t\t\tthis.s.listenKeys = a.join('');\n\t\t}\n\t},\n\n\t/**\n\t * Resolve a button configuration\n\t * @param  {string|function|object} conf Button config to resolve\n\t * @return {object} Button configuration\n\t * @private\n\t */\n\t_resolveExtends: function ( conf )\n\t{\n\t\tvar that = this;\n\t\tvar dt = this.s.dt;\n\t\tvar i, ien;\n\t\tvar toConfObject = function ( base ) {\n\t\t\tvar loop = 0;\n\n\t\t\t// Loop until we have resolved to a button configuration, or an\n\t\t\t// array of button configurations (which will be iterated\n\t\t\t// separately)\n\t\t\twhile ( ! $.isPlainObject(base) && ! Array.isArray(base) ) {\n\t\t\t\tif ( base === undefined ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( typeof base === 'function' ) {\n\t\t\t\t\tbase = base.call( that, dt, conf );\n\n\t\t\t\t\tif ( ! base ) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if ( typeof base === 'string' ) {\n\t\t\t\t\tif ( ! _dtButtons[ base ] ) {\n\t\t\t\t\t\treturn {html: base}\n\t\t\t\t\t}\n\n\t\t\t\t\tbase = _dtButtons[ base ];\n\t\t\t\t}\n\n\t\t\t\tloop++;\n\t\t\t\tif ( loop > 30 ) {\n\t\t\t\t\t// Protect against misconfiguration killing the browser\n\t\t\t\t\tthrow 'Buttons: Too many iterations';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn Array.isArray( base ) ?\n\t\t\t\tbase :\n\t\t\t\t$.extend( {}, base );\n\t\t};\n\n\t\tconf = toConfObject( conf );\n\n\t\twhile ( conf && conf.extend ) {\n\t\t\t// Use `toConfObject` in case the button definition being extended\n\t\t\t// is itself a string or a function\n\t\t\tif ( ! _dtButtons[ conf.extend ] ) {\n\t\t\t\tthrow 'Cannot extend unknown button type: '+conf.extend;\n\t\t\t}\n\n\t\t\tvar objArray = toConfObject( _dtButtons[ conf.extend ] );\n\t\t\tif ( Array.isArray( objArray ) ) {\n\t\t\t\treturn objArray;\n\t\t\t}\n\t\t\telse if ( ! objArray ) {\n\t\t\t\t// This is a little brutal as it might be possible to have a\n\t\t\t\t// valid button without the extend, but if there is no extend\n\t\t\t\t// then the host button would be acting in an undefined state\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Stash the current class name\n\t\t\tvar originalClassName = objArray.className;\n\n\t\t\tif (conf.config !== undefined && objArray.config !== undefined) {\n\t\t\t\tconf.config = $.extend({}, objArray.config, conf.config)\n\t\t\t}\n\n\t\t\tconf = $.extend( {}, objArray, conf );\n\n\t\t\t// The extend will have overwritten the original class name if the\n\t\t\t// `conf` object also assigned a class, but we want to concatenate\n\t\t\t// them so they are list that is combined from all extended buttons\n\t\t\tif ( originalClassName && conf.className !== originalClassName ) {\n\t\t\t\tconf.className = originalClassName+' '+conf.className;\n\t\t\t}\n\n\t\t\t// Although we want the `conf` object to overwrite almost all of\n\t\t\t// the properties of the object being extended, the `extend`\n\t\t\t// property should come from the object being extended\n\t\t\tconf.extend = objArray.extend;\n\t\t}\n\n\t\t// Buttons to be added to a collection  -gives the ability to define\n\t\t// if buttons should be added to the start or end of a collection\n\t\tvar postfixButtons = conf.postfixButtons;\n\t\tif ( postfixButtons ) {\n\t\t\tif ( ! conf.buttons ) {\n\t\t\t\tconf.buttons = [];\n\t\t\t}\n\n\t\t\tfor ( i=0, ien=postfixButtons.length ; i<ien ; i++ ) {\n\t\t\t\tconf.buttons.push( postfixButtons[i] );\n\t\t\t}\n\t\t}\n\n\t\tvar prefixButtons = conf.prefixButtons;\n\t\tif ( prefixButtons ) {\n\t\t\tif ( ! conf.buttons ) {\n\t\t\t\tconf.buttons = [];\n\t\t\t}\n\n\t\t\tfor ( i=0, ien=prefixButtons.length ; i<ien ; i++ ) {\n\t\t\t\tconf.buttons.splice( i, 0, prefixButtons[i] );\n\t\t\t}\n\t\t}\n\n\t\treturn conf;\n\t},\n\n\t/**\n\t * Display (and replace if there is an existing one) a popover attached to a button\n\t * @param {string|node} content Content to show\n\t * @param {DataTable.Api} hostButton DT API instance of the button\n\t * @param {object} inOpts Options (see object below for all options)\n\t */\n\t_popover: function ( content, hostButton, inOpts, e ) {\n\t\tvar dt = hostButton;\n\t\tvar buttonsSettings = this.c;\n\t\tvar closed = false;\n\t\tvar options = $.extend( {\n\t\t\talign: 'button-left', // button-right, dt-container, split-left, split-right\n\t\t\tautoClose: false,\n\t\t\tbackground: true,\n\t\t\tbackgroundClassName: 'dt-button-background',\n\t\t\tcloseButton: true,\n\t\t\tcontentClassName: buttonsSettings.dom.collection.className,\n\t\t\tcollectionLayout: '',\n\t\t\tcollectionTitle: '',\n\t\t\tdropup: false,\n\t\t\tfade: 400,\n\t\t\tpopoverTitle: '',\n\t\t\trightAlignClassName: 'dt-button-right',\n\t\t\ttag: buttonsSettings.dom.collection.tag\n\t\t}, inOpts );\n\n\t\tvar hostNode = hostButton.node();\n\n\t\tvar close = function () {\n\t\t\tclosed = true;\n\n\t\t\t_fadeOut(\n\t\t\t\t$('.dt-button-collection'),\n\t\t\t\toptions.fade,\n\t\t\t\tfunction () {\n\t\t\t\t\t$(this).detach();\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t$(dt.buttons( '[aria-haspopup=\"dialog\"][aria-expanded=\"true\"]' ).nodes())\n\t\t\t\t.attr('aria-expanded', 'false');\n\n\t\t\t$('div.dt-button-background').off( 'click.dtb-collection' );\n\t\t\tButtons.background( false, options.backgroundClassName, options.fade, hostNode );\n\n\t\t\t$(window).off('resize.resize.dtb-collection');\n\t\t\t$('body').off( '.dtb-collection' );\n\t\t\tdt.off( 'buttons-action.b-internal' );\n\t\t\tdt.off( 'destroy' );\n\t\t};\n\n\t\tif (content === false) {\n\t\t\tclose();\n\t\t\treturn;\n\t\t}\n\n\t\tvar existingExpanded = $(dt.buttons( '[aria-haspopup=\"dialog\"][aria-expanded=\"true\"]' ).nodes());\n\t\tif ( existingExpanded.length ) {\n\t\t\t// Reuse the current position if the button that was triggered is inside an existing collection\n\t\t\tif (hostNode.closest('div.dt-button-collection').length) {\n\t\t\t\thostNode = existingExpanded.eq(0);\n\t\t\t}\n\n\t\t\tclose();\n\t\t}\n\n\t\t// Try to be smart about the layout\n\t\tvar cnt = $('.dt-button', content).length;\n\t\tvar mod = '';\n\n\t\tif (cnt === 3) {\n\t\t\tmod = 'dtb-b3';\n\t\t}\n\t\telse if (cnt === 2) {\n\t\t\tmod = 'dtb-b2';\n\t\t}\n\t\telse if (cnt === 1) {\n\t\t\tmod = 'dtb-b1';\n\t\t}\n\n\t\tvar display = $('<div/>')\n\t\t\t.addClass('dt-button-collection')\n\t\t\t.addClass(options.collectionLayout)\n\t\t\t.addClass(options.splitAlignClass)\n\t\t\t.addClass(mod)\n\t\t\t.css('display', 'none')\n\t\t\t.attr({\n\t\t\t\t'aria-modal': true,\n\t\t\t\trole: 'dialog'\n\t\t\t});\n\n\t\tcontent = $(content)\n\t\t\t.addClass(options.contentClassName)\n\t\t\t.attr('role', 'menu')\n\t\t\t.appendTo(display);\n\n\t\thostNode.attr( 'aria-expanded', 'true' );\n\n\t\tif ( hostNode.parents('body')[0] !== document.body ) {\n\t\t\thostNode = document.body.lastChild;\n\t\t}\n\n\t\tif ( options.popoverTitle ) {\n\t\t\tdisplay.prepend('<div class=\"dt-button-collection-title\">'+options.popoverTitle+'</div>');\n\t\t}\n\t\telse if ( options.collectionTitle ) {\n\t\t\tdisplay.prepend('<div class=\"dt-button-collection-title\">'+options.collectionTitle+'</div>');\n\t\t}\n\n\t\tif (options.closeButton) {\n\t\t\tdisplay.prepend('<div class=\"dtb-popover-close\">x</div>').addClass('dtb-collection-closeable')\n\t\t}\n\n\t\t_fadeIn( display.insertAfter( hostNode ), options.fade );\n\n\t\tvar tableContainer = $( hostButton.table().container() );\n\t\tvar position = display.css( 'position' );\n\n\t\tif ( options.span === 'container' || options.align === 'dt-container' ) {\n\t\t\thostNode = hostNode.parent();\n\t\t\tdisplay.css('width', tableContainer.width());\n\t\t}\n\n\t\t// Align the popover relative to the DataTables container\n\t\t// Useful for wide popovers such as SearchPanes\n\t\tif (position === 'absolute') {\n\t\t\t// Align relative to the host button\n\t\t\tvar offsetParent = $(hostNode[0].offsetParent);\n\t\t\tvar buttonPosition = hostNode.position();\n\t\t\tvar buttonOffset = hostNode.offset();\n\t\t\tvar tableSizes = offsetParent.offset();\n\t\t\tvar containerPosition = offsetParent.position();\n\t\t\tvar computed = window.getComputedStyle(offsetParent[0]);\n\n\t\t\ttableSizes.height = offsetParent.outerHeight();\n\t\t\ttableSizes.width = offsetParent.width() + parseFloat(computed.paddingLeft);\n\t\t\ttableSizes.right = tableSizes.left + tableSizes.width;\n\t\t\ttableSizes.bottom = tableSizes.top + tableSizes.height;\n\n\t\t\t// Set the initial position so we can read height / width\n\t\t\tvar top = buttonPosition.top + hostNode.outerHeight();\n\t\t\tvar left = buttonPosition.left;\n\n\t\t\tdisplay.css( {\n\t\t\t\ttop: top,\n\t\t\t\tleft: left\n\t\t\t} );\n\n\t\t\t// Get the popover position\n\t\t\tcomputed = window.getComputedStyle(display[0]);\n\t\t\tvar popoverSizes = display.offset();\n\n\t\t\tpopoverSizes.height = display.outerHeight();\n\t\t\tpopoverSizes.width = display.outerWidth();\n\t\t\tpopoverSizes.right = popoverSizes.left + popoverSizes.width;\n\t\t\tpopoverSizes.bottom = popoverSizes.top + popoverSizes.height;\n\t\t\tpopoverSizes.marginTop = parseFloat(computed.marginTop);\n\t\t\tpopoverSizes.marginBottom = parseFloat(computed.marginBottom);\n\n\t\t\t// First position per the class requirements - pop up and right align\n\t\t\tif (options.dropup) {\n\t\t\t\ttop = buttonPosition.top - popoverSizes.height - popoverSizes.marginTop - popoverSizes.marginBottom;\n\t\t\t}\n\n\t\t\tif (options.align === 'button-right' || display.hasClass( options.rightAlignClassName )) {\n\t\t\t\tleft = buttonPosition.left - popoverSizes.width + hostNode.outerWidth(); \n\t\t\t}\n\n\t\t\t// Container alignment - make sure it doesn't overflow the table container\n\t\t\tif (options.align === 'dt-container' || options.align === 'container') {\n\t\t\t\tif (left < buttonPosition.left) {\n\t\t\t\t\tleft = -buttonPosition.left;\n\t\t\t\t}\n\n\t\t\t\tif (left + popoverSizes.width > tableSizes.width) {\n\t\t\t\t\tleft = tableSizes.width - popoverSizes.width;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Window adjustment\n\t\t\tif (containerPosition.left + left + popoverSizes.width > $(window).width()) {\n\t\t\t\t// Overflowing the document to the right\n\t\t\t\tleft = $(window).width() - popoverSizes.width - containerPosition.left;\n\t\t\t}\n\n\t\t\tif (buttonOffset.left + left < 0) {\n\t\t\t\t// Off to the left of the document\n\t\t\t\tleft = -buttonOffset.left;\n\t\t\t}\n\n\t\t\tif (containerPosition.top + top + popoverSizes.height > $(window).height() + $(window).scrollTop()) {\n\t\t\t\t// Pop up if otherwise we'd need the user to scroll down\n\t\t\t\ttop = buttonPosition.top - popoverSizes.height - popoverSizes.marginTop - popoverSizes.marginBottom;\n\t\t\t}\n\n\t\t\tif (containerPosition.top + top < $(window).scrollTop()) {\n\t\t\t\t// Correction for when the top is beyond the top of the page\n\t\t\t\ttop = buttonPosition.top + hostNode.outerHeight();\n\t\t\t}\n\n\t\t\t// Calculations all done - now set it\n\t\t\tdisplay.css( {\n\t\t\t\ttop: top,\n\t\t\t\tleft: left\n\t\t\t} );\n\t\t}\n\t\telse {\n\t\t\t// Fix position - centre on screen\n\t\t\tvar position = function () {\n\t\t\t\tvar half = $(window).height() / 2;\n\n\t\t\t\tvar top = display.height() / 2;\n\t\t\t\tif ( top > half ) {\n\t\t\t\t\ttop = half;\n\t\t\t\t}\n\n\t\t\t\tdisplay.css( 'marginTop', top*-1 );\n\t\t\t};\n\n\t\t\tposition();\n\n\t\t\t$(window).on('resize.dtb-collection', function () {\n\t\t\t\tposition();\n\t\t\t});\n\t\t}\n\n\t\tif ( options.background ) {\n\t\t\tButtons.background(\n\t\t\t\ttrue,\n\t\t\t\toptions.backgroundClassName,\n\t\t\t\toptions.fade,\n\t\t\t\toptions.backgroundHost || hostNode\n\t\t\t);\n\t\t}\n\n\t\t// This is bonkers, but if we don't have a click listener on the\n\t\t// background element, iOS Safari will ignore the body click\n\t\t// listener below. An empty function here is all that is\n\t\t// required to make it work...\n\t\t$('div.dt-button-background').on( 'click.dtb-collection', function () {} );\n\n\t\tif ( options.autoClose ) {\n\t\t\tsetTimeout( function () {\n\t\t\t\tdt.on( 'buttons-action.b-internal', function (e, btn, dt, node) {\n\t\t\t\t\tif ( node[0] === hostNode[0] ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tclose();\n\t\t\t\t} );\n\t\t\t}, 0);\n\t\t}\n\t\t\n\t\t$(display).trigger('buttons-popover.dt');\n\n\n\t\tdt.on('destroy', close);\n\n\t\tsetTimeout(function() {\n\t\t\tclosed = false;\n\t\t\t$('body')\n\t\t\t\t.on( 'click.dtb-collection', function (e) {\n\t\t\t\t\tif (closed) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// andSelf is deprecated in jQ1.8, but we want 1.7 compat\n\t\t\t\t\tvar back = $.fn.addBack ? 'addBack' : 'andSelf';\n\t\t\t\t\tvar parent = $(e.target).parent()[0];\n\t\n\t\t\t\t\tif (( ! $(e.target).parents()[back]().filter( content ).length  && !$(parent).hasClass('dt-buttons')) || $(e.target).hasClass('dt-button-background')) {\n\t\t\t\t\t\tclose();\n\t\t\t\t\t}\n\t\t\t\t} )\n\t\t\t\t.on( 'keyup.dtb-collection', function (e) {\n\t\t\t\t\tif ( e.keyCode === 27 ) {\n\t\t\t\t\t\tclose();\n\t\t\t\t\t}\n\t\t\t\t} )\n\t\t\t\t.on( 'keydown.dtb-collection', function (e) {\n\t\t\t\t\t// Focus trap for tab key\n\t\t\t\t\tvar elements = $('a, button', content);\n\t\t\t\t\tvar active = document.activeElement;\n\n\t\t\t\t\tif (e.keyCode !== 9) { // tab\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (elements.index(active) === -1) {\n\t\t\t\t\t\t// If current focus is not inside the popover\n\t\t\t\t\t\telements.first().focus();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t\telse if (e.shiftKey) {\n\t\t\t\t\t\t// Reverse tabbing order when shift key is pressed\n\t\t\t\t\t\tif (active === elements[0]) {\n\t\t\t\t\t\t\telements.last().focus();\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (active === elements.last()[0]) {\n\t\t\t\t\t\t\telements.first().focus();\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t}, 0);\n\t}\n} );\n\n\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n * Statics\n */\n\n/**\n * Show / hide a background layer behind a collection\n * @param  {boolean} Flag to indicate if the background should be shown or\n *   hidden \n * @param  {string} Class to assign to the background\n * @static\n */\nButtons.background = function ( show, className, fade, insertPoint ) {\n\tif ( fade === undefined ) {\n\t\tfade = 400;\n\t}\n\tif ( ! insertPoint ) {\n\t\tinsertPoint = document.body;\n\t}\n\n\tif ( show ) {\n\t\t_fadeIn(\n\t\t\t$('<div/>')\n\t\t\t\t.addClass( className )\n\t\t\t\t.css( 'display', 'none' )\n\t\t\t\t.insertAfter( insertPoint ),\n\t\t\tfade\n\t\t);\n\t}\n\telse {\n\t\t_fadeOut(\n\t\t\t$('div.'+className),\n\t\t\tfade,\n\t\t\tfunction () {\n\t\t\t\t$(this)\n\t\t\t\t\t.removeClass( className )\n\t\t\t\t\t.remove();\n\t\t\t}\n\t\t);\n\t}\n};\n\n/**\n * Instance selector - select Buttons instances based on an instance selector\n * value from the buttons assigned to a DataTable. This is only useful if\n * multiple instances are attached to a DataTable.\n * @param  {string|int|array} Instance selector - see `instance-selector`\n *   documentation on the DataTables site\n * @param  {array} Button instance array that was attached to the DataTables\n *   settings object\n * @return {array} Buttons instances\n * @static\n */\nButtons.instanceSelector = function ( group, buttons )\n{\n\tif ( group === undefined || group === null ) {\n\t\treturn $.map( buttons, function ( v ) {\n\t\t\treturn v.inst;\n\t\t} );\n\t}\n\n\tvar ret = [];\n\tvar names = $.map( buttons, function ( v ) {\n\t\treturn v.name;\n\t} );\n\n\t// Flatten the group selector into an array of single options\n\tvar process = function ( input ) {\n\t\tif ( Array.isArray( input ) ) {\n\t\t\tfor ( var i=0, ien=input.length ; i<ien ; i++ ) {\n\t\t\t\tprocess( input[i] );\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif ( typeof input === 'string' ) {\n\t\t\tif ( input.indexOf( ',' ) !== -1 ) {\n\t\t\t\t// String selector, list of names\n\t\t\t\tprocess( input.split(',') );\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// String selector individual name\n\t\t\t\tvar idx = $.inArray( input.trim(), names );\n\n\t\t\t\tif ( idx !== -1 ) {\n\t\t\t\t\tret.push( buttons[ idx ].inst );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if ( typeof input === 'number' ) {\n\t\t\t// Index selector\n\t\t\tret.push( buttons[ input ].inst );\n\t\t}\n\t\telse if ( typeof input === 'object' ) {\n\t\t\t// Actual instance selector\n\t\t\tret.push( input );\n\t\t}\n\t};\n\t\n\tprocess( group );\n\n\treturn ret;\n};\n\n/**\n * Button selector - select one or more buttons from a selector input so some\n * operation can be performed on them.\n * @param  {array} Button instances array that the selector should operate on\n * @param  {string|int|node|jQuery|array} Button selector - see\n *   `button-selector` documentation on the DataTables site\n * @return {array} Array of objects containing `inst` and `idx` properties of\n *   the selected buttons so you know which instance each button belongs to.\n * @static\n */\nButtons.buttonSelector = function ( insts, selector )\n{\n\tvar ret = [];\n\tvar nodeBuilder = function ( a, buttons, baseIdx ) {\n\t\tvar button;\n\t\tvar idx;\n\n\t\tfor ( var i=0, ien=buttons.length ; i<ien ; i++ ) {\n\t\t\tbutton = buttons[i];\n\n\t\t\tif ( button ) {\n\t\t\t\tidx = baseIdx !== undefined ?\n\t\t\t\t\tbaseIdx+i :\n\t\t\t\t\ti+'';\n\n\t\t\t\ta.push( {\n\t\t\t\t\tnode: button.node,\n\t\t\t\t\tname: button.conf.name,\n\t\t\t\t\tidx:  idx\n\t\t\t\t} );\n\n\t\t\t\tif ( button.buttons ) {\n\t\t\t\t\tnodeBuilder( a, button.buttons, idx+'-' );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar run = function ( selector, inst ) {\n\t\tvar i, ien;\n\t\tvar buttons = [];\n\t\tnodeBuilder( buttons, inst.s.buttons );\n\n\t\tvar nodes = $.map( buttons, function (v) {\n\t\t\treturn v.node;\n\t\t} );\n\n\t\tif ( Array.isArray( selector ) || selector instanceof $ ) {\n\t\t\tfor ( i=0, ien=selector.length ; i<ien ; i++ ) {\n\t\t\t\trun( selector[i], inst );\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif ( selector === null || selector === undefined || selector === '*' ) {\n\t\t\t// Select all\n\t\t\tfor ( i=0, ien=buttons.length ; i<ien ; i++ ) {\n\t\t\t\tret.push( {\n\t\t\t\t\tinst: inst,\n\t\t\t\t\tnode: buttons[i].node\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t\telse if ( typeof selector === 'number' ) {\n\t\t\t// Main button index selector\n\t\t\tif (inst.s.buttons[ selector ]) {\n\t\t\t\tret.push( {\n\t\t\t\t\tinst: inst,\n\t\t\t\t\tnode: inst.s.buttons[ selector ].node\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t\telse if ( typeof selector === 'string' ) {\n\t\t\tif ( selector.indexOf( ',' ) !== -1 ) {\n\t\t\t\t// Split\n\t\t\t\tvar a = selector.split(',');\n\n\t\t\t\tfor ( i=0, ien=a.length ; i<ien ; i++ ) {\n\t\t\t\t\trun( a[i].trim(), inst );\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if ( selector.match( /^\\d+(\\-\\d+)*$/ ) ) {\n\t\t\t\t// Sub-button index selector\n\t\t\t\tvar indexes = $.map( buttons, function (v) {\n\t\t\t\t\treturn v.idx;\n\t\t\t\t} );\n\n\t\t\t\tret.push( {\n\t\t\t\t\tinst: inst,\n\t\t\t\t\tnode: buttons[ $.inArray( selector, indexes ) ].node\n\t\t\t\t} );\n\t\t\t}\n\t\t\telse if ( selector.indexOf( ':name' ) !== -1 ) {\n\t\t\t\t// Button name selector\n\t\t\t\tvar name = selector.replace( ':name', '' );\n\n\t\t\t\tfor ( i=0, ien=buttons.length ; i<ien ; i++ ) {\n\t\t\t\t\tif ( buttons[i].name === name ) {\n\t\t\t\t\t\tret.push( {\n\t\t\t\t\t\t\tinst: inst,\n\t\t\t\t\t\t\tnode: buttons[i].node\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// jQuery selector on the nodes\n\t\t\t\t$( nodes ).filter( selector ).each( function () {\n\t\t\t\t\tret.push( {\n\t\t\t\t\t\tinst: inst,\n\t\t\t\t\t\tnode: this\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t\telse if ( typeof selector === 'object' && selector.nodeName ) {\n\t\t\t// Node selector\n\t\t\tvar idx = $.inArray( selector, nodes );\n\n\t\t\tif ( idx !== -1 ) {\n\t\t\t\tret.push( {\n\t\t\t\t\tinst: inst,\n\t\t\t\t\tnode: nodes[ idx ]\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t};\n\n\n\tfor ( var i=0, ien=insts.length ; i<ien ; i++ ) {\n\t\tvar inst = insts[i];\n\n\t\trun( selector, inst );\n\t}\n\n\treturn ret;\n};\n\n/**\n * Default function used for formatting output data.\n * @param {*} str Data to strip\n */\nButtons.stripData = function ( str, config ) {\n\tif ( typeof str !== 'string' ) {\n\t\treturn str;\n\t}\n\n\t// Always remove script tags\n\tstr = str.replace( /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, '' );\n\n\t// Always remove comments\n\tstr = str.replace( /<!\\-\\-.*?\\-\\->/g, '' );\n\n\tif ( ! config || config.stripHtml ) {\n\t\tstr = str.replace( /<[^>]*>/g, '' );\n\t}\n\n\tif ( ! config || config.trim ) {\n\t\tstr = str.replace( /^\\s+|\\s+$/g, '' );\n\t}\n\n\tif ( ! config || config.stripNewlines ) {\n\t\tstr = str.replace( /\\n/g, ' ' );\n\t}\n\n\tif ( ! config || config.decodeEntities ) {\n\t\t_exportTextarea.innerHTML = str;\n\t\tstr = _exportTextarea.value;\n\t}\n\n\treturn str;\n};\n\n\n/**\n * Buttons defaults. For full documentation, please refer to the docs/option\n * directory or the DataTables site.\n * @type {Object}\n * @static\n */\nButtons.defaults = {\n\tbuttons: [ 'copy', 'excel', 'csv', 'pdf', 'print' ],\n\tname: 'main',\n\ttabIndex: 0,\n\tdom: {\n\t\tcontainer: {\n\t\t\ttag: 'div',\n\t\t\tclassName: 'dt-buttons'\n\t\t},\n\t\tcollection: {\n\t\t\ttag: 'div',\n\t\t\tclassName: ''\n\t\t},\n\t\tbutton: {\n\t\t\ttag: 'button',\n\t\t\tclassName: 'dt-button',\n\t\t\tactive: 'active',\n\t\t\tdisabled: 'disabled',\n\t\t\tspacerClass: ''\n\t\t},\n\t\tbuttonLiner: {\n\t\t\ttag: 'span',\n\t\t\tclassName: ''\n\t\t},\n\t\tsplit: {\n\t\t\ttag: 'div',\n\t\t\tclassName: 'dt-button-split',\n\t\t},\n\t\tsplitWrapper: {\n\t\t\ttag: 'div',\n\t\t\tclassName: 'dt-btn-split-wrapper',\n\t\t},\n\t\tsplitDropdown: {\n\t\t\ttag: 'button',\n\t\t\ttext: '&#x25BC;',\n\t\t\tclassName: 'dt-btn-split-drop',\n\t\t\talign: 'split-right',\n\t\t\tsplitAlignClass: 'dt-button-split-left'\n\t\t},\n\t\tsplitDropdownButton: {\n\t\t\ttag: 'button',\n\t\t\tclassName: 'dt-btn-split-drop-button dt-button',\n\t\t},\n\t\tsplitCollection: {\n\t\t\ttag: 'div',\n\t\t\tclassName: 'dt-button-split-collection',\n\t\t}\n\t}\n};\n\n/**\n * Version information\n * @type {string}\n * @static\n */\nButtons.version = '2.3.4';\n\n\n$.extend( _dtButtons, {\n\tcollection: {\n\t\ttext: function ( dt ) {\n\t\t\treturn dt.i18n( 'buttons.collection', 'Collection' );\n\t\t},\n\t\tclassName: 'buttons-collection',\n\t\tcloseButton: false,\n\t\tinit: function ( dt, button, config ) {\n\t\t\tbutton.attr( 'aria-expanded', false );\n\t\t},\n\t\taction: function ( e, dt, button, config ) {\n\t\t\tif ( config._collection.parents('body').length ) {\n\t\t\t\tthis.popover(false, config);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.popover(config._collection, config);\n\t\t\t}\n\n\t\t\t// When activated using a key - auto focus on the\n\t\t\t// first item in the popover\n\t\t\tif (e.type === 'keypress') {\n\t\t\t\t$('a, button', config._collection).eq(0).focus();\n\t\t\t}\n\t\t},\n\t\tattr: {\n\t\t\t'aria-haspopup': 'dialog'\n\t\t}\n\t\t// Also the popover options, defined in Buttons.popover\n\t},\n\tsplit: {\n\t\ttext: function ( dt ) {\n\t\t\treturn dt.i18n( 'buttons.split', 'Split' );\n\t\t},\n\t\tclassName: 'buttons-split',\n\t\tcloseButton: false,\n\t\tinit: function ( dt, button, config ) {\n\t\t\treturn button.attr( 'aria-expanded', false );\n\t\t},\n\t\taction: function ( e, dt, button, config ) {\n\t\t\tthis.popover(config._collection, config);\n\t\t},\n\t\tattr: {\n\t\t\t'aria-haspopup': 'dialog'\n\t\t}\n\t\t// Also the popover options, defined in Buttons.popover\n\t},\n\tcopy: function ( dt, conf ) {\n\t\tif ( _dtButtons.copyHtml5 ) {\n\t\t\treturn 'copyHtml5';\n\t\t}\n\t},\n\tcsv: function ( dt, conf ) {\n\t\tif ( _dtButtons.csvHtml5 && _dtButtons.csvHtml5.available( dt, conf ) ) {\n\t\t\treturn 'csvHtml5';\n\t\t}\n\t},\n\texcel: function ( dt, conf ) {\n\t\tif ( _dtButtons.excelHtml5 && _dtButtons.excelHtml5.available( dt, conf ) ) {\n\t\t\treturn 'excelHtml5';\n\t\t}\n\t},\n\tpdf: function ( dt, conf ) {\n\t\tif ( _dtButtons.pdfHtml5 && _dtButtons.pdfHtml5.available( dt, conf ) ) {\n\t\t\treturn 'pdfHtml5';\n\t\t}\n\t},\n\tpageLength: function ( dt ) {\n\t\tvar lengthMenu = dt.settings()[0].aLengthMenu;\n\t\tvar vals = [];\n\t\tvar lang = [];\n\t\tvar text = function ( dt ) {\n\t\t\treturn dt.i18n( 'buttons.pageLength', {\n\t\t\t\t\"-1\": 'Show all rows',\n\t\t\t\t_:    'Show %d rows'\n\t\t\t}, dt.page.len() );\n\t\t};\n\n\t\t// Support for DataTables 1.x 2D array\n\t\tif (Array.isArray( lengthMenu[0] )) {\n\t\t\tvals = lengthMenu[0];\n\t\t\tlang = lengthMenu[1];\n\t\t}\n\t\telse {\n\t\t\tfor (var i=0 ; i<lengthMenu.length ; i++) {\n\t\t\t\tvar option = lengthMenu[i];\n\n\t\t\t\t// Support for DataTables 2 object in the array\n\t\t\t\tif ($.isPlainObject(option)) {\n\t\t\t\t\tvals.push(option.value);\n\t\t\t\t\tlang.push(option.label);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvals.push(option);\n\t\t\t\t\tlang.push(option);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\textend: 'collection',\n\t\t\ttext: text,\n\t\t\tclassName: 'buttons-page-length',\n\t\t\tautoClose: true,\n\t\t\tbuttons: $.map( vals, function ( val, i ) {\n\t\t\t\treturn {\n\t\t\t\t\ttext: lang[i],\n\t\t\t\t\tclassName: 'button-page-length',\n\t\t\t\t\taction: function ( e, dt ) {\n\t\t\t\t\t\tdt.page.len( val ).draw();\n\t\t\t\t\t},\n\t\t\t\t\tinit: function ( dt, node, conf ) {\n\t\t\t\t\t\tvar that = this;\n\t\t\t\t\t\tvar fn = function () {\n\t\t\t\t\t\t\tthat.active( dt.page.len() === val );\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tdt.on( 'length.dt'+conf.namespace, fn );\n\t\t\t\t\t\tfn();\n\t\t\t\t\t},\n\t\t\t\t\tdestroy: function ( dt, node, conf ) {\n\t\t\t\t\t\tdt.off( 'length.dt'+conf.namespace );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} ),\n\t\t\tinit: function ( dt, node, conf ) {\n\t\t\t\tvar that = this;\n\t\t\t\tdt.on( 'length.dt'+conf.namespace, function () {\n\t\t\t\t\tthat.text( conf.text );\n\t\t\t\t} );\n\t\t\t},\n\t\t\tdestroy: function ( dt, node, conf ) {\n\t\t\t\tdt.off( 'length.dt'+conf.namespace );\n\t\t\t}\n\t\t};\n\t},\n\tspacer: {\n\t\tstyle: 'empty',\n\t\tspacer: true,\n\t\ttext: function ( dt ) {\n\t\t\treturn dt.i18n( 'buttons.spacer', '' );\n\t\t}\n\t}\n} );\n\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n * DataTables API\n *\n * For complete documentation, please refer to the docs/api directory or the\n * DataTables site\n */\n\n// Buttons group and individual button selector\nDataTable.Api.register( 'buttons()', function ( group, selector ) {\n\t// Argument shifting\n\tif ( selector === undefined ) {\n\t\tselector = group;\n\t\tgroup = undefined;\n\t}\n\n\tthis.selector.buttonGroup = group;\n\n\tvar res = this.iterator( true, 'table', function ( ctx ) {\n\t\tif ( ctx._buttons ) {\n\t\t\treturn Buttons.buttonSelector(\n\t\t\t\tButtons.instanceSelector( group, ctx._buttons ),\n\t\t\t\tselector\n\t\t\t);\n\t\t}\n\t}, true );\n\n\tres._groupSelector = group;\n\treturn res;\n} );\n\n// Individual button selector\nDataTable.Api.register( 'button()', function ( group, selector ) {\n\t// just run buttons() and truncate\n\tvar buttons = this.buttons( group, selector );\n\n\tif ( buttons.length > 1 ) {\n\t\tbuttons.splice( 1, buttons.length );\n\t}\n\n\treturn buttons;\n} );\n\n// Active buttons\nDataTable.Api.registerPlural( 'buttons().active()', 'button().active()', function ( flag ) {\n\tif ( flag === undefined ) {\n\t\treturn this.map( function ( set ) {\n\t\t\treturn set.inst.active( set.node );\n\t\t} );\n\t}\n\n\treturn this.each( function ( set ) {\n\t\tset.inst.active( set.node, flag );\n\t} );\n} );\n\n// Get / set button action\nDataTable.Api.registerPlural( 'buttons().action()', 'button().action()', function ( action ) {\n\tif ( action === undefined ) {\n\t\treturn this.map( function ( set ) {\n\t\t\treturn set.inst.action( set.node );\n\t\t} );\n\t}\n\n\treturn this.each( function ( set ) {\n\t\tset.inst.action( set.node, action );\n\t} );\n} );\n\n// Collection control\nDataTable.Api.registerPlural( 'buttons().collectionRebuild()', 'button().collectionRebuild()', function ( buttons ) {\n\treturn this.each( function ( set ) {\n\t\tfor(var i = 0; i < buttons.length; i++) {\n\t\t\tif(typeof buttons[i] === 'object') {\n\t\t\t\tbuttons[i].parentConf = set;\n\t\t\t}\n\t\t}\n\t\tset.inst.collectionRebuild( set.node, buttons );\n\t} );\n} );\n\n// Enable / disable buttons\nDataTable.Api.register( ['buttons().enable()', 'button().enable()'], function ( flag ) {\n\treturn this.each( function ( set ) {\n\t\tset.inst.enable( set.node, flag );\n\t} );\n} );\n\n// Disable buttons\nDataTable.Api.register( ['buttons().disable()', 'button().disable()'], function () {\n\treturn this.each( function ( set ) {\n\t\tset.inst.disable( set.node );\n\t} );\n} );\n\n// Button index\nDataTable.Api.register( 'button().index()', function () {\n\tvar idx = null;\n\n\tthis.each( function ( set ) {\n\t\tvar res = set.inst.index( set.node );\n\n\t\tif (res !== null) {\n\t\t\tidx = res;\n\t\t}\n\t} );\n\n\treturn idx;\n} );\n\n// Get button nodes\nDataTable.Api.registerPlural( 'buttons().nodes()', 'button().node()', function () {\n\tvar jq = $();\n\n\t// jQuery will automatically reduce duplicates to a single entry\n\t$( this.each( function ( set ) {\n\t\tjq = jq.add( set.inst.node( set.node ) );\n\t} ) );\n\n\treturn jq;\n} );\n\n// Get / set button processing state\nDataTable.Api.registerPlural( 'buttons().processing()', 'button().processing()', function ( flag ) {\n\tif ( flag === undefined ) {\n\t\treturn this.map( function ( set ) {\n\t\t\treturn set.inst.processing( set.node );\n\t\t} );\n\t}\n\n\treturn this.each( function ( set ) {\n\t\tset.inst.processing( set.node, flag );\n\t} );\n} );\n\n// Get / set button text (i.e. the button labels)\nDataTable.Api.registerPlural( 'buttons().text()', 'button().text()', function ( label ) {\n\tif ( label === undefined ) {\n\t\treturn this.map( function ( set ) {\n\t\t\treturn set.inst.text( set.node );\n\t\t} );\n\t}\n\n\treturn this.each( function ( set ) {\n\t\tset.inst.text( set.node, label );\n\t} );\n} );\n\n// Trigger a button's action\nDataTable.Api.registerPlural( 'buttons().trigger()', 'button().trigger()', function () {\n\treturn this.each( function ( set ) {\n\t\tset.inst.node( set.node ).trigger( 'click' );\n\t} );\n} );\n\n// Button resolver to the popover\nDataTable.Api.register( 'button().popover()', function (content, options) {\n\treturn this.map( function ( set ) {\n\t\treturn set.inst._popover( content, this.button(this[0].node), options );\n\t} );\n} );\n\n// Get the container elements\nDataTable.Api.register( 'buttons().containers()', function () {\n\tvar jq = $();\n\tvar groupSelector = this._groupSelector;\n\n\t// We need to use the group selector directly, since if there are no buttons\n\t// the result set will be empty\n\tthis.iterator( true, 'table', function ( ctx ) {\n\t\tif ( ctx._buttons ) {\n\t\t\tvar insts = Buttons.instanceSelector( groupSelector, ctx._buttons );\n\n\t\t\tfor ( var i=0, ien=insts.length ; i<ien ; i++ ) {\n\t\t\t\tjq = jq.add( insts[i].container() );\n\t\t\t}\n\t\t}\n\t} );\n\n\treturn jq;\n} );\n\nDataTable.Api.register( 'buttons().container()', function () {\n\t// API level of nesting is `buttons()` so we can zip into the containers method\n\treturn this.containers().eq(0);\n} );\n\n// Add a new button\nDataTable.Api.register( 'button().add()', function ( idx, conf, draw ) {\n\tvar ctx = this.context;\n\n\t// Don't use `this` as it could be empty - select the instances directly\n\tif ( ctx.length ) {\n\t\tvar inst = Buttons.instanceSelector( this._groupSelector, ctx[0]._buttons );\n\n\t\tif ( inst.length ) {\n\t\t\tinst[0].add( conf, idx , draw);\n\t\t}\n\t}\n\n\treturn this.button( this._groupSelector, idx );\n} );\n\n// Destroy the button sets selected\nDataTable.Api.register( 'buttons().destroy()', function () {\n\tthis.pluck( 'inst' ).unique().each( function ( inst ) {\n\t\tinst.destroy();\n\t} );\n\n\treturn this;\n} );\n\n// Remove a button\nDataTable.Api.registerPlural( 'buttons().remove()', 'buttons().remove()', function () {\n\tthis.each( function ( set ) {\n\t\tset.inst.remove( set.node );\n\t} );\n\n\treturn this;\n} );\n\n// Information box that can be used by buttons\nvar _infoTimer;\nDataTable.Api.register( 'buttons.info()', function ( title, message, time ) {\n\tvar that = this;\n\n\tif ( title === false ) {\n\t\tthis.off('destroy.btn-info');\n\t\t_fadeOut(\n\t\t\t$('#datatables_buttons_info'),\n\t\t\t400,\n\t\t\tfunction () {\n\t\t\t\t$(this).remove();\n\t\t\t}\n\t\t);\n\t\tclearTimeout( _infoTimer );\n\t\t_infoTimer = null;\n\n\t\treturn this;\n\t}\n\n\tif ( _infoTimer ) {\n\t\tclearTimeout( _infoTimer );\n\t}\n\n\tif ( $('#datatables_buttons_info').length ) {\n\t\t$('#datatables_buttons_info').remove();\n\t}\n\n\ttitle = title ? '<h2>'+title+'</h2>' : '';\n\n\t_fadeIn(\n\t\t$('<div id=\"datatables_buttons_info\" class=\"dt-button-info\"/>')\n\t\t\t.html( title )\n\t\t\t.append( $('<div/>')[ typeof message === 'string' ? 'html' : 'append' ]( message ) )\n\t\t\t.css( 'display', 'none' )\n\t\t\t.appendTo( 'body' )\n\t);\n\n\tif ( time !== undefined && time !== 0 ) {\n\t\t_infoTimer = setTimeout( function () {\n\t\t\tthat.buttons.info( false );\n\t\t}, time );\n\t}\n\n\tthis.on('destroy.btn-info', function () {\n\t\tthat.buttons.info(false);\n\t});\n\n\treturn this;\n} );\n\n// Get data from the table for export - this is common to a number of plug-in\n// buttons so it is included in the Buttons core library\nDataTable.Api.register( 'buttons.exportData()', function ( options ) {\n\tif ( this.context.length ) {\n\t\treturn _exportData( new DataTable.Api( this.context[0] ), options );\n\t}\n} );\n\n// Get information about the export that is common to many of the export data\n// types (DRY)\nDataTable.Api.register( 'buttons.exportInfo()', function ( conf ) {\n\tif ( ! conf ) {\n\t\tconf = {};\n\t}\n\n\treturn {\n\t\tfilename: _filename( conf ),\n\t\ttitle: _title( conf ),\n\t\tmessageTop: _message(this, conf.message || conf.messageTop, 'top'),\n\t\tmessageBottom: _message(this, conf.messageBottom, 'bottom')\n\t};\n} );\n\n\n\n/**\n * Get the file name for an exported file.\n *\n * @param {object}\tconfig Button configuration\n * @param {boolean} incExtension Include the file name extension\n */\nvar _filename = function ( config )\n{\n\t// Backwards compatibility\n\tvar filename = config.filename === '*' && config.title !== '*' && config.title !== undefined && config.title !== null && config.title !== '' ?\n\t\tconfig.title :\n\t\tconfig.filename;\n\n\tif ( typeof filename === 'function' ) {\n\t\tfilename = filename();\n\t}\n\n\tif ( filename === undefined || filename === null ) {\n\t\treturn null;\n\t}\n\n\tif ( filename.indexOf( '*' ) !== -1 ) {\n\t\tfilename = filename.replace( '*', $('head > title').text() ).trim();\n\t}\n\n\t// Strip characters which the OS will object to\n\tfilename = filename.replace(/[^a-zA-Z0-9_\\u00A1-\\uFFFF\\.,\\-_ !\\(\\)]/g, \"\");\n\n\tvar extension = _stringOrFunction( config.extension );\n\tif ( ! extension ) {\n\t\textension = '';\n\t}\n\n\treturn filename + extension;\n};\n\n/**\n * Simply utility method to allow parameters to be given as a function\n *\n * @param {undefined|string|function} option Option\n * @return {null|string} Resolved value\n */\nvar _stringOrFunction = function ( option )\n{\n\tif ( option === null || option === undefined ) {\n\t\treturn null;\n\t}\n\telse if ( typeof option === 'function' ) {\n\t\treturn option();\n\t}\n\treturn option;\n};\n\n/**\n * Get the title for an exported file.\n *\n * @param {object} config\tButton configuration\n */\nvar _title = function ( config )\n{\n\tvar title = _stringOrFunction( config.title );\n\n\treturn title === null ?\n\t\tnull : title.indexOf( '*' ) !== -1 ?\n\t\t\ttitle.replace( '*', $('head > title').text() || 'Exported data' ) :\n\t\t\ttitle;\n};\n\nvar _message = function ( dt, option, position )\n{\n\tvar message = _stringOrFunction( option );\n\tif ( message === null ) {\n\t\treturn null;\n\t}\n\n\tvar caption = $('caption', dt.table().container()).eq(0);\n\tif ( message === '*' ) {\n\t\tvar side = caption.css( 'caption-side' );\n\t\tif ( side !== position ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn caption.length ?\n\t\t\tcaption.text() :\n\t\t\t'';\n\t}\n\n\treturn message;\n};\n\n\n\n\nvar _exportTextarea = $('<textarea/>')[0];\nvar _exportData = function ( dt, inOpts )\n{\n\tvar config = $.extend( true, {}, {\n\t\trows:           null,\n\t\tcolumns:        '',\n\t\tmodifier:       {\n\t\t\tsearch: 'applied',\n\t\t\torder:  'applied'\n\t\t},\n\t\torthogonal:     'display',\n\t\tstripHtml:      true,\n\t\tstripNewlines:  true,\n\t\tdecodeEntities: true,\n\t\ttrim:           true,\n\t\tformat:         {\n\t\t\theader: function ( d ) {\n\t\t\t\treturn Buttons.stripData( d, config );\n\t\t\t},\n\t\t\tfooter: function ( d ) {\n\t\t\t\treturn Buttons.stripData( d, config );\n\t\t\t},\n\t\t\tbody: function ( d ) {\n\t\t\t\treturn Buttons.stripData( d, config );\n\t\t\t}\n\t\t},\n\t\tcustomizeData: null\n\t}, inOpts );\n\n\tvar header = dt.columns( config.columns ).indexes().map( function (idx) {\n\t\tvar el = dt.column( idx ).header();\n\t\treturn config.format.header( el.innerHTML, idx, el );\n\t} ).toArray();\n\n\tvar footer = dt.table().footer() ?\n\t\tdt.columns( config.columns ).indexes().map( function (idx) {\n\t\t\tvar el = dt.column( idx ).footer();\n\t\t\treturn config.format.footer( el ? el.innerHTML : '', idx, el );\n\t\t} ).toArray() :\n\t\tnull;\n\t\n\t// If Select is available on this table, and any rows are selected, limit the export\n\t// to the selected rows. If no rows are selected, all rows will be exported. Specify\n\t// a `selected` modifier to control directly.\n\tvar modifier = $.extend( {}, config.modifier );\n\tif ( dt.select && typeof dt.select.info === 'function' && modifier.selected === undefined ) {\n\t\tif ( dt.rows( config.rows, $.extend( { selected: true }, modifier ) ).any() ) {\n\t\t\t$.extend( modifier, { selected: true } )\n\t\t}\n\t}\n\n\tvar rowIndexes = dt.rows( config.rows, modifier ).indexes().toArray();\n\tvar selectedCells = dt.cells( rowIndexes, config.columns );\n\tvar cells = selectedCells\n\t\t.render( config.orthogonal )\n\t\t.toArray();\n\tvar cellNodes = selectedCells\n\t\t.nodes()\n\t\t.toArray();\n\n\tvar columns = header.length;\n\tvar rows = columns > 0 ? cells.length / columns : 0;\n\tvar body = [];\n\tvar cellCounter = 0;\n\n\tfor ( var i=0, ien=rows ; i<ien ; i++ ) {\n\t\tvar row = [ columns ];\n\n\t\tfor ( var j=0 ; j<columns ; j++ ) {\n\t\t\trow[j] = config.format.body( cells[ cellCounter ], i, j, cellNodes[ cellCounter ] );\n\t\t\tcellCounter++;\n\t\t}\n\n\t\tbody[i] = row;\n\t}\n\n\tvar data = {\n\t\theader: header,\n\t\tfooter: footer,\n\t\tbody:   body\n\t};\n\n\tif ( config.customizeData ) {\n\t\tconfig.customizeData( data );\n\t}\n\n\treturn data;\n};\n\n\n/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n * DataTables interface\n */\n\n// Attach to DataTables objects for global access\n$.fn.dataTable.Buttons = Buttons;\n$.fn.DataTable.Buttons = Buttons;\n\n\n\n// DataTables creation - check if the buttons have been defined for this table,\n// they will have been if the `B` option was used in `dom`, otherwise we should\n// create the buttons instance here so they can be inserted into the document\n// using the API. Listen for `init` for compatibility with pre 1.10.10, but to\n// be removed in future.\n$(document).on( 'init.dt plugin-init.dt', function (e, settings) {\n\tif ( e.namespace !== 'dt' ) {\n\t\treturn;\n\t}\n\n\tvar opts = settings.oInit.buttons || DataTable.defaults.buttons;\n\n\tif ( opts && ! settings._buttons ) {\n\t\tnew Buttons( settings, opts ).container();\n\t}\n} );\n\nfunction _init ( settings, options ) {\n\tvar api = new DataTable.Api( settings );\n\tvar opts = options\n\t\t? options\n\t\t: api.init().buttons || DataTable.defaults.buttons;\n\n\treturn new Buttons( api, opts ).container();\n}\n\n// DataTables `dom` feature option\nDataTable.ext.feature.push( {\n\tfnInit: _init,\n\tcFeature: \"B\"\n} );\n\n// DataTables 2 layout feature\nif ( DataTable.ext.features ) {\n\tDataTable.ext.features.register( 'buttons', _init );\n}\n\n\nreturn DataTable;\n}));\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}